!function(f,J){"use strict";var m="ht",g=f[m],X="px",d="left",R="top",V="bottom",E="right",Y="innerHTML",O="className",t="",i="width",D="height",v="string",x="position",A="absolute",h="0",T="opacity",k="background",S=g.Default,y=S.getInternal(),c=g.Color,q=S.animate,Q=S.isTouchable,u=S.isTouchEvent,B=null,o=(Math.sqrt,f.parseInt),G=f.setTimeout,w=(Math.round,c.titleIconBackground),$=function(l){return typeof l===v||l instanceof String},K=function(){return document},z=function(r){return K().createElement(r)},L=function(){var P=z("div");return P.tabIndex=-1,P.style.outline="none",P},j=function(){return z("canvas")},M=function(K,c){s(K,"-webkit-transform",c),s(K,"-ms-transform",c),s(K,"transform",c)},s=function(I,D,p){I.style.setProperty(D,p,B)},p=function(c,Y,F){S.def(g.widget[c],Y,F)},r=function(I,E){I.appendChild(E)},b=function(){return K().documentElement},C=function(){return b().clientWidth},l=function(){return b().clientHeight},N=y.addEventListener,F=y.removeEventListener,n=function($){var V=$.touches[0];return V?V:$.changedTouches[0]};y.addMethod(S,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:w},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:w}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:w},{type:"rect",rect:[10,10,80,20],background:w}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:w},{type:"rect",rect:[10,34,56,14],background:w},{type:"rect",rect:[34,10,56,14],background:w},{type:"rect",rect:[82,10,8,56],background:w},{type:"rect",rect:[66,62,24,8],background:w}]},dialogTitleLabelColor:S.labelSelectColor,dialogTitleLabelFont:(Q?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:S.labelFont,dialogTitleBackground:c.titleBackground,dialogHeaderBackground:c.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var e=function(P){var a=this;a.$1d=P,a.addListeners()};S.def(e,J,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(r){var P=this,Q=P.$1d,i=Q.$6d,o=Q._config,T=Q.$7d,V=r,J=r.target;if(T.contains(J)||S.preventDefault(r),S.isLeftButton(r)){u(r)&&(V=n(r));var G=P.$8d={x:V.pageX,y:V.pageY};P.$9d={x:G.x,y:G.y},!o.maximized&&o.draggable&&i.contains(J)&&(P.$4d=!0,S.startDragging(P,r)),P.handle_mousemove(r)&&(P.$2d=!0,S.startDragging(P,r)),T.contains(r.target)||Q.$41d.focus()}},handle_mousedown:function(j){this.handle_touchstart(j)},handle_touchend:function(B){if(S.isLeftButton(B)&&!this.$5d&&!this.$3d){var h=this,U=h.$1d,o=B.target,u=U._config,F=U.$18d,d=U.$16d;for(u.closable&&F.contains(o)&&U.hide(),u.maximizable&&d.contains(o)&&(u.maximized?U.restore():U.maximize());o&&(o.className||"").indexOf("dialog-button")<0;)o=o.parentNode;o&&o.buttonItem&&U.action&&U.action(o.buttonItem,B),delete h.$8d,delete h.$9d}},handle_mouseup:function(z){this.handle_touchend(z)},handleWindowTouchEnd:function(D){var v=this,K=v.$1d,e=K.$10d;v.$2d&&v.$3d?e.fire({kind:"endResize",target:K,originEvent:D}):v.$4d&&v.$5d&&e.fire({kind:"endMove",target:K,originEvent:D}),this.clear()},handleWindowMouseUp:function(v){this.handleWindowTouchEnd(v)},handle_mousemove:function(C){var v=this.$1d._config;if(v.maximized)return!1;if("w"!==v.resizeMode&&"h"!==v.resizeMode&&"wh"!==v.resizeMode)return!1;var K=this,H=K.getView(),f=H.querySelector(".resize-area"),B=f.getBoundingClientRect(),g={x:B.left,y:B.top,width:B.width,height:B.height};C=u(C)?n(C):C;var F=C.clientX,Y=C.clientY,Z={x:F,y:Y};return S.containsPoint(g,Z)?(s(H,"cursor","nwse-resize"),!0):(s(H,"cursor",t),void 0)},handleWindowTouchMove:function(f){f.preventDefault();var z=f;u(f)&&(z=n(f));var M=this,W=M.$8d,y=M.$9d;if(!(y.x==W.x&&y.y==W.y&&S.getDistance(y,{x:z.pageX,y:z.pageY})<=1)){var H=M.$1d,Z=H._config,V=H.$21d,b=Z.resizeMode||"wh",O=z.pageX-W.x,Q=z.pageY-W.y;if(M.$2d){var A=V.offsetWidth,h=V.offsetHeight,g=A+O,q=h+Q;if(g=Math.max(g,50),q=Math.max(q,50),"center"===Z.position||Z.position==B){var E={},T=V.getBoundingClientRect();E.x=T.left,E.y=T.top,Z.position=E}"w"===b?(H.setSize(g,h),W.x+=g-A):"h"===b?(H.setSize(A,q),W.y+=q-h):"wh"===b&&(H.setSize(g,q),W.x+=g-A,W.y+=q-h),M.$3d?H.$10d.fire({kind:"betweenResize",target:H,originEvent:f}):(M.$3d=!0,H.$10d.fire({kind:"beginResize",target:H,originEvent:f}))}else if(M.$4d){var $=V.getBoundingClientRect(),r=$.width,L=$.height,I=C(),K=l(),U=o(V.style.left)||0,c=o(V.style.top)||0,i=U+O,k=c+Q,J=H.adjustPosition({x:i,y:k},{width:r,height:L},{width:I,height:K});J&&(i=J.x,k=J.y);var t=i-U,e=k-c;s(V,d,i+X),s(V,R,k+X),W.x+=t,W.y+=e,Z.position={x:i,y:k},M.$5d?H.$10d.fire({kind:"betweenMove",target:H,originEvent:f}):(M.$5d=!0,H.$10d.fire({kind:"beginMove",target:H,originEvent:f}))}}},handleWindowMouseMove:function(i){this.handleWindowTouchMove(i)},handleWindowResize:function(){var e=this,y=e,S=y._config,H=y.$21d,I=C(),W=l(),U=S.width,x=S.height,z=S.position||"center";S.maximized?(s(H,i,I+X),s(H,D,W+X),s(H,R,h),s(H,d,h)):(s(H,i,U+X),s(H,D,x+X),"center"===z?(s(H,d,(I-U)/2+X),s(H,R,(W-x)/2+X)):(s(H,d,z.x+X),s(H,R,z.y+X))),y.iv()},handle_mousewheel:function(R){R.stopPropagation()},handle_DOMMouseScroll:function(k){k.stopPropagation()}}),g.widget.Dialog=function(U){var G=this,Q=G._view=y.createView(null,G);Q[O]="ht-widget-dialog",s(Q,x,A),S.baseZIndex!=B&&s(Q,"z-index",S.baseZIndex+"");var m=G.$11d=new e(G);G.bindingHandleWindowResize=m.handleWindowResize.bind(G),G.$10d=new g.Notifier,U&&G.setConfig(U)},p("Dialog",J,{ms_v:1,ms_fire:1,setTitle:function(C){this._config.title=C,this.getView().querySelector(".dialog-container-title span").innerHTML=C},clearNodes:function(m){if(m)for(;m.firstChild;)m.removeChild(m.firstChild)},$31d:function(){var c=this,R=c.$6d=L(),m=c._config,n=c.$12d=c.$13d();R[O]="dialog-container-title",s(R,"cursor","default"),s(R,"white-space","nowrap"),s(R,"overflow","hidden"),s(R,"font",S.dialogTitleLabelFont),s(R,k,m.titleBackground||S.dialogTitleBackground),s(R,"color",m.titleColor||S.dialogTitleLabelColor);var q=z("span"),g=c.$25d();if(m.titleAlign&&s(R,"text-align",m.titleAlign),m.titleIcon){var h=c.$14d=c.$15d();r(R,h)}if(m.title&&m.title.trim&&(m.title=m.title.trim()),q[Y]=m.title||"&nbsp;",r(R,q),m.maximizable){var M=c.$16d=c.$17d();r(n,M)}if(m.closable){var a=c.$18d=c.$19d();r(n,a)}return r(R,n),s(R,"display","block"),s(R,"line-height",g+X),R},$13d:function(){var T=L();return s(T,x,A),s(T,d,h),s(T,E,5+X),s(T,R,h),s(T,V,h),s(T,"text-align",E),s(T,"white-space","nowrap"),T[O]="dialog-title-controls",T},$20d:function(){var M=this.$21d=L(),A=this._config,a=A.borderWidth;return s(M,x,"fixed"),s(M,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),s(M,"padding",h+" "+a+X+" "+a+X+" "+a+X),s(M,"box-sizing","border-box"),s(M,"-moz-box-sizing","border-box"),M[O]="dialog-container",s(M,k,A.titleBackground||S.dialogTitleBackground),M},$22d:function(){var u,C=this,t=C._config,Q=C.$7d=L(),_=t.content,n=0,m=t.contentPadding||0;t.buttons!=B&&t.buttons.length>0&&(n=32),$(_)?Q[Y]=_:_.getView?(u=_.getView(),r(Q,u)):(u=_,r(Q,u)),s(Q,x,A),s(Q,"font",S.dialogContentLabelFont),g.Default.appendToScreen(Q);var W=Q.offsetWidth+1,q=Q.offsetHeight,h=C.$25d();return t.width==B&&(t.width=W+10+2*m),t.height==B&&(t.height=q+h+n+5+2*m),g.Default.removeHTML(Q),u&&(s(u,"box-sizing","border-box"),s(u,"-moz-box-sizing","border-box"),s(u,i,"100%"),s(u,D,"100%")),Q[O]="dialog-content",s(Q,R,h+m+X),s(Q,V,n+m+X),s(Q,d,m+X),s(Q,E,m+X),s(Q,"overflow","hidden"),Q},getOverlayDiv:function(){return this.$41d},$23d:function(){var $=this.$41d=L();return $[O]="dialog-overlay",s($,i,"100%"),s($,D,"100%"),s($,x,"fixed"),s($,R,h),s($,d,h),s($,k,"rgba(235, 235, 235, 0.7)"),$},_config:B,setSize:function(Z,R){var L=this,v=L._config;v&&(v.width=Z,v.height=R,L.isShowing()&&(L.bindingHandleWindowResize(),L.iv()))},getConfig:function(){return this._config},$24d:function(){var l=this._config,A=l.titleIconSize||16;return Q&&(A*=1.2),A},$25d:function(){var I=this._config,s=I.titleHeight||S.widgetTitleHeight;return s},$26d:function(x){s(x,"cursor","pointer"),s(x,"display","inline-block"),s(x,"margin-right",(Q?8:4)+X),s(x,"vertical-align",R)},$27d:function(){var e=this.$30d=L(),P=10;return Q&&(P=20),s(e,i,P+X),s(e,D,P+X),s(e,x,A),s(e,V,h),s(e,E,h),e[O]="resize-area",e},$15d:function(){var L=this,B=j();B[O]="dialog-title-control dialog-title-control-icon";var v=L.$25d(),T=L.$24d();return L.$26d(B),y.setCanvas(B,T,v),B},$17d:function(){var P=j();P[O]="dialog-title-control dialog-title-control-maximize";var V=this.$25d(),q=this.$24d();return this.$26d(P),y.setCanvas(P,q,V),P},$19d:function(){var D=j();D[O]="dialog-title-control dialog-title-control-close";var T=this.$25d(),w=this.$24d();return this.$26d(D),y.setCanvas(D,w,T),D},$28d:function(){var j=L();return s(j,k,S.dialogContentBackground||"white"),s(j,i,"100%"),s(j,D,"100%"),s(j,x,"relative"),j},$29d:function(){var T=this,w=L();s(w,"line-height",32+X),s(w,x,A),s(w,V,h),s(w,d,h),s(w,"white-space","nowrap"),s(w,"overflow","hidden"),s(w,E,h),s(w,k,S.dialogHeaderBackground),w[O]="dialog-container-buttons";var z=this._config,U=z.buttonsAlign||E,H=0;return s(w,"text-align",U),T.$42d=[],z.buttons.forEach(function(F){var h=new g.widget.Button,t=h.getView();t[O]="dialog-button "+F.className,t.buttonItem=F,T.$42d.push(h),h.setBorderColor(B),h.setBackground(S.dialogButtonBackground),h.setSelectBackground(S.dialogButtonSelectBackground),h.setLabelColor(S.dialogButtonLabelColor),s(t,x,"relative"),s(t,"display","inline-block"),s(t,"text-align",d),s(t,"height",24+X);var M=Q?10:5;U===d||U===E?s(t,"margin-"+U,M+X):0===H||s(t,"margin-"+d,M+X),s(t,"vertical-align","middle");var o=S.getTextSize(h.getLabelFont(),F.label).width+10;h.onClicked=function(_){F.action&&F.action.call(T,F,_)},h.setLabel(F.label),h.setDisabled(F.disabled),s(t,i,o+X),r(w,h.getView()),H++}),w},setConfig:function(u){if(u){var L=this,j=L._view;L._config=u,L.action=u.action,L.clearNodes(j),u.borderWidth==B&&(u.borderWidth=5);var s=L.$23d(),e=L.$28d(),X=L.$31d(),M=L.$22d(),G=L.$20d(),P=L.$30d=L.$27d();if(r(j,s),r(j,G),r(G,e),r(e,X),r(e,M),u.buttons!=B&&u.buttons.length>0){var z=L.$29d();r(e,z)}r(G,P),u.maximized?(u.maximized=!1,L.bindingHandleWindowResize(),L.maximize(!0)):L.bindingHandleWindowResize(),L.isShowing()&&L.iv()}},hide:function(){var k=this,U=k.$21d,L=k.$41d,K=k._view;K[O]="ht-widget-dialog",q(U).duration(200).scale(.7).set(T,h).end(function(){k.onHidden&&k.onHidden(),g.Default.removeHTML(K),k.$10d.fire({kind:"hide",target:k})}),q(L).duration(200).set(T,h).end(),F(f,"resize",k.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(C){this.$41d.style.display=C?"block":"none"},isModal:function(){return"none"!==this.$41d.style.display},$32d:function(){var s=this,X=s._config,I=s.$21d;M(I,t),s.iv(),X.maximized?s.$10d.fire({kind:"maximize",target:s}):s.$10d.fire({kind:"restore",target:s})},maximize:function(F){var U=this,p=U.$21d,N=U._config;if(!N.maximized){N.maximized=!0,U.$33d(),U.$16d[O]="dialog-title-control dialog-title-control-minimize";var z=C(),v=l(),a=N.width,Y=N.height,k=o(p.style.left)||0,L=o(p.style.top)||0;U.$36d=a,U.$37d=Y,U.$34d=k,U.$35d=L;var Q=F?0:200;q(p).duration(Q).set(d,h).set(R,h).set(i,z+X).set(D,v+X).end(function(){U.$32d()})}},restore:function(){var x=this,V=x.$34d,z=x.$35d,l=x.$36d,E=x.$37d,M=x._config;if(M.maximized&&(M.maximized=!1,x.$33d(),x.$16d[O]="dialog-title-control dialog-title-control-maximize",x.isShowing()&&V!=B&&z!=B&&l!=B&&E!=B)){var h=x.$21d;q(h).duration(200).set(d,V+X).set(R,z+X).set(i,l+X).set(D,E+X).end(function(){x.$32d()})}delete x.$34d,delete x.$35d,delete x.$36d,delete x.$37d},show:function(){var K=this,J=K._view,P=K._config,Q=K.$21d,V=K.$41d;P&&P.zIndex!=B&&s(J,"z-index",P.zIndex+t),g.Default.appendToScreen(J),M(Q,"scale(0.7)"),s(Q,T,h),K.iv(),K.validate(),K._view[O]+=" dialog-show",G(function(){q(Q).duration(200).scale(1).set(T,"1").end(function(){s(Q,i,Q.clientWidth+X),s(Q,D,Q.clientHeight+X),K.onShown&&K.onShown(),K.$10d.fire({kind:"show",target:K});var W=P&&P.content;W&&W.iv&&W.iv()}),q(V).duration(200).set(T,"1").end(),N(f,"resize",K.bindingHandleWindowResize)},30)},setPosition:function(g){var p=this.$21d;p.style.left=g.x+"px",p.style.top=g.y+"px"},addEventListener:function(W,B,c){this.$10d.add(W,B,c)},removeEventListener:function(e,u){this.$10d.remove(e,u)},$38d:function(n,s,K,e){var u=y.initContext(n);y.translateAndScale(u,0,0,1),u.clearRect(0,0,K,K);var A=(K-e)/2;S.drawStretchImage(u,S.getImage(s),"fill",0,A,e,e),u.restore()},$33d:function(){var g=this,X=g._config,N=g.$16d,K=X.maximized?S.dialogRestoreIcon:S.dialogMaximizeIcon;if(N&&K){var Z=g.$25d(),b=g.$24d();g.$38d(N,S.getImage(K),Z,b)}},$39d:function(){var e=this,C=e._config,h=e.$14d,B=C.titleIcon;if(h&&B){var O=e.$25d(),$=e.$24d();e.$38d(h,S.getImage(B),O,$)}},$40d:function(){var U=this,T=U.$18d,f=S.dialogCloseIcon;if(T&&f){var v=U.$25d(),A=U.$24d();U.$38d(T,S.getImage(f),v,A)}},invalidate:function(j){var R=this,g=R.$42d;R._68I||(R._68I=1,S.callLater(R.validate,R,B,j),R.onInvalidated&&R.onInvalidated(),R.fireViewEvent("invalidate"));var U=R._config.content;U.invalidate&&U.invalidate(),g&&g.forEach(function(y){y.iv()})},validateImpl:function(){var g=this;g.$40d(),g.$33d(),g.$39d();var q=g._config.content;q.initView&&(q.setX(0),q.setY(0),q.setWidth(g.$7d.clientWidth),q.setHeight(g.$7d.clientHeight))},adjustPosition:function(M,a,A){var F=a.width,x=a.height,H=A.width,B=A.height,t=M.x,u=M.y,G=this._config,k=G.minDragSize||20;return"inside"===G.dragMode?(t+F>H&&(t=H-F),u+x>B&&(u=B-x),0>t&&(t=0),0>u&&(u=0)):(null==G.dragMode||"none"===G.dragMode)&&(-F+k>t&&(t=-F+k),t>H-k&&(t=H-k),u>B-k&&(u=B-k),0>u&&(u=0)),{x:t,y:u}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);