!function(k){"use strict";var W="ht",p=k[W],x=Math,q=x.max,s=x.min,K=x.abs,c=x.atan2,r=(x.cos,x.sin,x.ceil),l=p.Default,Y=l.getInternal(),v=p.List,U=Y.Mat,z=Y.getNodeRect,S=Y.intersectionLineRect,O=l.getDistance,d=l.setEdgeType,Z="left",e="right",H="top",R="bottom",Q="edge.type",V="edge.gap",y="edge.center",I="edge.extend",b=function(I,R){return z(I,R).width},$=function(U,u){return z(U,u).height},G=function(G,R){return Y.getEdgeHostPosition(G,R,"source")},w=function(v,H){return Y.getEdgeHostPosition(v,H,"target")},E=function(h,v){var d=h.s(Q),l=h.getEdgeGroup();if(l){var s=0;if(l.eachSiblingEdge(function(k){v.isVisible(k)&&k.s(Q)==d&&s++}),s>1)return h.s(V)*(s-1)/2}return 0},n=function(f,B){var s=f.s(Q),a=f.isLooped();if(!f.getEdgeGroup())return a?f.s(V):0;var r,e=0,X=0,W=0;return f.getEdgeGroup().getSiblings().each(function($){$.each(function(N){if(N._40I===f._40I&&N.s(Q)==s&&B.isVisible(N)){var F=N.s(V);r?(X+=W/2+F/2,W=F):(r=N,W=F),N===f&&(e=X)}})}),a?X-e+W:e-X/2},L=function(I,_){var h=_.s("edge.corner.radius");return l.toRoundedCorner(I,h)};Y.addMethod(p.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),d("boundary",function(s,k,V,F){F||(k=-k);var d,r=G(V,s),R=w(V,s),D=z(V,s._40I),C=z(V,s._41I),E=new U(c(R.y-r.y,R.x-r.x)),e=O(r,R),I=r.x,h=r.y;return d=E.tf(0,k),r={x:d.x+I,y:d.y+h},d=E.tf(e,k),R={x:d.x+I,y:d.y+h},d=S(r,R,D),d&&(r={x:d[0],y:d[1]}),d=S(r,R,C),d&&(R={x:d[0],y:d[1]}),{points:new v([r,R])}}),d("ripple",function(X,i,W,K){K||(i=-i);var h=G(W,X),x=w(W,X),p=O(h,x),u=s(X.s("edge.offset"),p/2),z=X.s("edge.ripple.size"),o=X.s("edge.ripple.length"),V=X.s("edge.ripple.both"),m=X.s(y),e=X.s("edge.ripple.elevation"),k=new v,S=X.s("edge.ripple.straight")?null:new v,d=new U(c(x.y-h.y,x.x-h.x));K||(e=-e),p-=2*u,o>0&&(z=r(p/o));var T=p/z;S&&S.add(1);for(var L=0;z>L;L++)S&&S.add(3),0===L?k.add({x:u+T*L,y:m?0:i}):k.add({x:u+T*L,y:i}),k.add({x:u+T*L+T/2,y:e+i}),V&&(e=-e);for(k.add({x:u+p,y:m?0:i}),L=0;L<k.size();L++){var C=d.tf(k.get(L));C.x+=h.x,C.y+=h.y,k.set(L,C)}return{points:k,segments:S}}),d("h.v",function(r,i,d){i=n(r,d);var J=new v,c=r.s(y),V=G(d,r),s=V.x,A=V.y,h=w(d,r),I=h.x,j=h.y,o=r._40I instanceof p.Edge,x=r._41I instanceof p.Edge,D=0,t=0,S=I-s,H=j-A;return c||(D=o?0:b(d,r._40I)/2,t=x?0:$(d,r._41I)/2),S>=0&&0>=H?(J.add({x:s+D,y:A+i}),J.add({x:I+i,y:A+i}),J.add({x:I+i,y:j+t})):0>=S&&H>=0?(J.add({x:s-D,y:A+i}),J.add({x:I+i,y:A+i}),J.add({x:I+i,y:j-t})):S>=0&&H>=0?(J.add({x:s+D,y:A+i}),J.add({x:I-i,y:A+i}),J.add({x:I-i,y:j-t})):(J.add({x:s-D,y:A+i}),J.add({x:I-i,y:A+i}),J.add({x:I-i,y:j+t})),L(J,r)}),d("v.h",function(H,j,J){j=n(H,J);var Z=new v,D=H.s(y),r=G(J,H),V=r.x,z=r.y,W=w(J,H),X=W.x,d=W.y,s=H._40I instanceof p.Edge,f=H._41I instanceof p.Edge,U=0,c=0,O=X-V,N=d-z;return D||(U=f?0:b(J,H._41I)/2,c=s?0:$(J,H._40I)/2),O>=0&&0>=N?(Z.add({x:V+j,y:z-c}),Z.add({x:V+j,y:d+j}),Z.add({x:X-U,y:d+j})):0>=O&&N>=0?(Z.add({x:V+j,y:z+c}),Z.add({x:V+j,y:d+j}),Z.add({x:X+U,y:d+j})):O>=0&&N>=0?(Z.add({x:V-j,y:z+c}),Z.add({x:V-j,y:d+j}),Z.add({x:X-U,y:d+j})):(Z.add({x:V-j,y:z-c}),Z.add({x:V-j,y:d+j}),Z.add({x:X+U,y:d+j})),L(Z,H)}),d("ortho",function(s,B,g){var R=new v,t=s.s(y),X=s.s("edge.ortho"),C=s._40I,z=s._41I,I=G(g,s),r=I.x,E=I.y,i=w(g,s),k=i.x,M=i.y,_=k-r,V=M-E,F=C instanceof p.Edge,q=z instanceof p.Edge,u=t||F?0:b(g,C)/2,P=t||F?0:$(g,C)/2,x=t||q?0:b(g,z)/2,H=t||q?0:$(g,z)/2,Y=(_-(u+x)*(_>0?1:-1))*X,j=(V-(P+H)*(V>0?1:-1))*X;return K(_)<K(V)?_>=0&&0>=V?(R.add({x:r+B,y:E-P}),R.add({x:r+B,y:E+j+B-P}),R.add({x:k+B,y:E+j+B-P}),R.add({x:k+B,y:M+H})):0>=_&&V>=0?(R.add({x:r+B,y:E+P}),R.add({x:r+B,y:E+j+B+P}),R.add({x:k+B,y:E+j+B+P}),R.add({x:k+B,y:M-H})):_>=0&&V>=0?(R.add({x:r+B,y:E+P}),R.add({x:r+B,y:E+j-B+P}),R.add({x:k+B,y:E+j-B+P}),R.add({x:k+B,y:M-H})):(R.add({x:r+B,y:E-P}),R.add({x:r+B,y:E+j-B-P}),R.add({x:k+B,y:E+j-B-P}),R.add({x:k+B,y:M+H})):_>=0&&0>=V?(R.add({x:r+u,y:E+B}),R.add({x:r+Y+B+u,y:E+B}),R.add({x:r+Y+B+u,y:M+B}),R.add({x:k-x,y:M+B})):0>=_&&V>=0?(R.add({x:r-u,y:E+B}),R.add({x:r+Y+B-u,y:E+B}),R.add({x:r+Y+B-u,y:M+B}),R.add({x:k+x,y:M+B})):_>=0&&V>=0?(R.add({x:r+u,y:E+B}),R.add({x:r+Y-B+u,y:E+B}),R.add({x:r+Y-B+u,y:M+B}),R.add({x:k-x,y:M+B})):(R.add({x:r-u,y:E+B}),R.add({x:r+Y-B-u,y:E+B}),R.add({x:r+Y-B-u,y:M+B}),R.add({x:k+x,y:M+B})),L(R,s)}),d("flex",function(D,u,h){var s=new v,r=D.s("edge.flex")+E(D,h),g=D.s(y),H=D._40I,T=D._41I,z=G(h,D),B=z.x,n=z.y,Z=w(h,D),Q=Z.x,_=Z.y,i=H instanceof p.Edge,l=T instanceof p.Edge,e=Q-B,J=_-n,m=g||i?0:b(h,H)/2,k=g||i?0:$(h,H)/2,f=g||l?0:b(h,T)/2,O=g||l?0:$(h,T)/2,V=e>0?r:-r,R=J>0?r:-r;return K(e)<K(J)?e>=0&&0>=J?(s.add({x:B+u,y:n-k}),s.add({x:B+u,y:n+R+u-k}),s.add({x:Q+u,y:_-R+u+O}),s.add({x:Q+u,y:_+O})):0>=e&&J>=0?(s.add({x:B+u,y:n+k}),s.add({x:B+u,y:n+R+u+k}),s.add({x:Q+u,y:_-R+u-O}),s.add({x:Q+u,y:_-O})):e>=0&&J>=0?(s.add({x:B+u,y:n+k}),s.add({x:B+u,y:n+R-u+k}),s.add({x:Q+u,y:_-R-u-O}),s.add({x:Q+u,y:_-O})):(s.add({x:B+u,y:n-k}),s.add({x:B+u,y:n+R-u-k}),s.add({x:Q+u,y:_-R-u+O}),s.add({x:Q+u,y:_+O})):e>=0&&0>=J?(s.add({x:B+m,y:n+u}),s.add({x:B+V+u+m,y:n+u}),s.add({x:Q-V+u-f,y:_+u}),s.add({x:Q-f,y:_+u})):0>=e&&J>=0?(s.add({x:B-m,y:n+u}),s.add({x:B+V+u-m,y:n+u}),s.add({x:Q-V+u+f,y:_+u}),s.add({x:Q+f,y:_+u})):e>=0&&J>=0?(s.add({x:B+m,y:n+u}),s.add({x:B+V-u+m,y:n+u}),s.add({x:Q-V-u-f,y:_+u}),s.add({x:Q-f,y:_+u})):(s.add({x:B-m,y:n+u}),s.add({x:B+V-u-m,y:n+u}),s.add({x:Q-V-u+f,y:_+u}),s.add({x:Q+f,y:_+u})),L(s,D)}),d("extend.east",function($,M,a){var J=new v,S=$.s(I)+E($,a),m=$.s(y),o=G(a,$),U=$._40I instanceof p.Edge,X=$._41I instanceof p.Edge,h=o.x+(m||U?0:b(a,$._40I)/2),K=o.y,g=w(a,$),H=g.x+(m||X?0:b(a,$._41I)/2),e=g.y,C=q(h,H)+S;return K>e?(J.add({x:h,y:K+M}),J.add({x:C+M,y:K+M}),J.add({x:C+M,y:e-M}),J.add({x:H,y:e-M})):(J.add({x:h,y:K-M}),J.add({x:C+M,y:K-M}),J.add({x:C+M,y:e+M}),J.add({x:H,y:e+M})),L(J,$)}),d("extend.west",function(Q,l,x){var c=new v,K=Q.s(I)+E(Q,x),e=Q.s(y),N=Q._40I instanceof p.Edge,z=Q._41I instanceof p.Edge,T=G(x,Q),V=T.x-(e||N?0:b(x,Q._40I)/2),Y=T.y,g=w(x,Q),S=g.x-(e||z?0:b(x,Q._41I)/2),F=g.y,n=s(V,S)-K;return Y>F?(c.add({x:V,y:Y+l}),c.add({x:n-l,y:Y+l}),c.add({x:n-l,y:F-l}),c.add({x:S,y:F-l})):(c.add({x:V,y:Y-l}),c.add({x:n-l,y:Y-l}),c.add({x:n-l,y:F+l}),c.add({x:S,y:F+l})),L(c,Q)}),d("extend.north",function(D,F,Z){var K=new v,g=D.s(I)+E(D,Z),d=D.s(y),h=D._40I instanceof p.Edge,C=D._41I instanceof p.Edge,V=G(Z,D),x=V.x,u=V.y-(d||h?0:$(Z,D._40I)/2),Q=w(Z,D),c=Q.x,a=Q.y-(d||C?0:$(Z,D._41I)/2),l=s(u,a)-g;return x>c?(K.add({y:u,x:x+F}),K.add({y:l-F,x:x+F}),K.add({y:l-F,x:c-F}),K.add({y:a,x:c-F})):(K.add({y:u,x:x-F}),K.add({y:l-F,x:x-F}),K.add({y:l-F,x:c+F}),K.add({y:a,x:c+F})),L(K,D)}),d("extend.south",function(W,M,r){var b=new v,V=W.s(I)+E(W,r),o=W.s(y),R=W._40I instanceof p.Edge,f=W._41I instanceof p.Edge,d=G(r,W),l=d.x,A=d.y+(o||R?0:$(r,W._40I)/2),i=w(r,W),j=i.x,K=i.y+(o||f?0:$(r,W._41I)/2),D=q(A,K)+V;return l>j?(b.add({y:A,x:l+M}),b.add({y:D+M,x:l+M}),b.add({y:D+M,x:j-M}),b.add({y:K,x:j-M})):(b.add({y:A,x:l-M}),b.add({y:D+M,x:l-M}),b.add({y:D+M,x:j+M}),b.add({y:K,x:j+M})),L(b,W)});var i=function(B,I,n,d,y){if(d.sort(function(r,V){var B=r.getSourceAgent()===I?r.getTargetAgent():r.getSourceAgent(),U=V.getSourceAgent()===I?V.getTargetAgent():V.getSourceAgent(),c=B.p(),D=U.p();if(n===Z||n===e){if(c.y>D.y)return 1;if(c.y<D.y)return-1}else{if(c.x>D.x)return 1;if(c.x<D.x)return-1}return l.sortFunc(r.getId(),V.getId())}),y){for(var w,L,m,_=B.getSourceAgent(),s=B.getTargetAgent(),W=0;W<d.size();W++){var J=d.get(W);J.getSourceAgent()===_&&J.getTargetAgent()===s||J.getTargetAgent()===_&&J.getSourceAgent()===s?(L||(L=new v),L.add(J,0)):L?(m||(m=new v),m.add(J)):(w||(w=new v),w.add(J))}d.clear(),w&&d.addAll(w),L&&d.addAll(L),m&&d.addAll(m)}var b=d.indexOf(B),h=d.size(),X=B.s(V);return{side:n,index:b,size:h,offset:-X*(h-1)/2+X*b}},t=function(T,Z,P,f,h){var N=Z.s(Q);return i(Z,P,f,P.getAgentEdges().toList(function($){return T.isVisible($)&&$.s(Q)===N}),h)},f=function(S,f){var y=S.getSourceAgent()===f?S.getTargetAgent():S.getSourceAgent(),m=f.p(),t=y.p(),T=t.x-m.x,v=t.y-m.y;return T>0&&K(v)<=T?e:0>T&&K(v)<=-T?Z:v>0&&K(T)<=v?R:H},o=function(k,g,Z){var w=g.s(Q),A=f(g,Z);return i(g,Z,A,Z.getAgentEdges().toList(function(F){return k.isVisible(F)&&F.s(Q)===w&&f(F,Z)===A}))},X=function(g,d){var E=g.getSourceAgent()===d,N=E?g.getTargetAgent():g.getSourceAgent(),Y=d.p(),L=N.p();return E?Y.y>L.y?H:R:Y.x<L.x?e:Z},_=function(Z,P,J){var c=P.s(Q),n=X(P,J);return i(P,J,n,J.getAgentEdges().toList(function(l){return Z.isVisible(l)&&l.s(Q)===c&&X(l,J)===n}),n===e||n===R)},D=function(L,O){var M=L.getSourceAgent()===O,N=M?L.getTargetAgent():L.getSourceAgent(),V=O.p(),n=N.p();return M?V.x<n.x?e:Z:V.y>n.y?H:R},M=function(I,K,X){var Y=K.s(Q),b=D(K,X);return i(K,X,b,X.getAgentEdges().toList(function(w){return I.isVisible(w)&&w.s(Q)===Y&&D(w,X)===b}),b===e||b===R)},g=function(F,h,k){var g=F.getSourceAgent(),f=F.getTargetAgent(),K=g.getId()>f.getId(),Y=K?f:g,q=K?g:f,u=Y.p(),n=q.p(),i=k(h,F,Y),t=k(h,F,q),w=F.s(y),O=w?0:b(h,Y)/2,_=w?0:b(h,q)/2,Q=w?0:$(h,Y)/2,I=w?0:$(h,q)/2,l=i.offset,X=t.offset,U=i.side,M=t.side,G=new v;return U===H?(G.add({x:u.x+l,y:u.y-Q}),G.add({x:u.x+l,y:n.y+X}),M===Z?G.add({x:n.x-_,y:n.y+X}):G.add({x:n.x+_,y:n.y+X})):U===R?(G.add({x:u.x+l,y:u.y+Q}),G.add({x:u.x+l,y:n.y+X}),M===Z?G.add({x:n.x-_,y:n.y+X}):G.add({x:n.x+_,y:n.y+X})):U===Z?(G.add({x:u.x-O,y:u.y+l}),G.add({x:n.x+X,y:u.y+l}),M===R?G.add({x:n.x+X,y:n.y+I}):G.add({x:n.x+X,y:n.y-I})):U===e&&(G.add({x:u.x+O,y:u.y+l}),G.add({x:n.x+X,y:u.y+l}),M===R?G.add({x:n.x+X,y:n.y+I}):G.add({x:n.x+X,y:n.y-I})),K&&G.reverse(),L(G,F)};d("ortho2",function(h,S,I){var f,g,U=h.s(y),l=h.s("edge.ortho"),B=h.getSourceAgent(),x=h.getTargetAgent(),t=B.getId()>x.getId(),u=t?x:B,d=t?B:x,r=u.p(),X=d.p(),Y=o(I,h,u),D=o(I,h,d),A=U?0:b(I,u)/2,O=U?0:$(I,u)/2,c=U?0:b(I,d)/2,z=U?0:$(I,d)/2,K=new v,j=Y.offset,J=D.offset,G=Y.side;return G===e?(f=X.y>r.y?-j:j,g=r.x+A+(X.x-c-r.x-A)*l,K.add({x:r.x+A,y:r.y+j}),K.add({x:g+f,y:r.y+j}),K.add({x:g+f,y:X.y+J}),K.add({x:X.x-c,y:X.y+J})):G===Z?(f=X.y>r.y?-j:j,g=r.x-A-(r.x-A-X.x-c)*l,K.add({x:r.x-A,y:r.y+j}),K.add({x:g-f,y:r.y+j}),K.add({x:g-f,y:X.y+J}),K.add({x:X.x+c,y:X.y+J})):G===R?(f=X.x>r.x?-j:j,g=r.y+O+(X.y-z-r.y-O)*l,K.add({x:r.x+j,y:r.y+O}),K.add({x:r.x+j,y:g+f}),K.add({x:X.x+J,y:g+f}),K.add({x:X.x+J,y:X.y-z})):G===H&&(f=X.x>r.x?-j:j,g=r.y-O-(r.y-O-X.y-z)*l,K.add({x:r.x+j,y:r.y-O}),K.add({x:r.x+j,y:g-f}),K.add({x:X.x+J,y:g-f}),K.add({x:X.x+J,y:X.y+z})),t&&K.reverse(),L(K,h)},!0),d("flex2",function(G,h,_){var J,n=G.getSourceAgent(),a=G.getTargetAgent(),l=n.getId()>a.getId(),E=l?a:n,M=l?n:a,s=E.p(),X=M.p(),r=o(_,G,E),C=o(_,G,M),d=G.s(y),O=G.s("edge.flex")+(r.size-1)/2*G.s(V),z=d?0:b(_,E)/2,w=d?0:$(_,E)/2,t=d?0:b(_,M)/2,j=d?0:$(_,M)/2,k=new v,m=r.offset,D=C.offset,P=r.side;return P===e?(J=X.y>s.y?-m:m,k.add({x:s.x+z,y:s.y+m}),k.add({x:s.x+z+O+J,y:s.y+m}),k.add({x:X.x-t-O+J,y:X.y+D}),k.add({x:X.x-t,y:X.y+D})):P===Z?(J=X.y>s.y?-m:m,k.add({x:s.x-z,y:s.y+m}),k.add({x:s.x-z-O-J,y:s.y+m}),k.add({x:X.x+t+O-J,y:X.y+D}),k.add({x:X.x+t,y:X.y+D})):P===R?(J=X.x>s.x?-m:m,k.add({x:s.x+m,y:s.y+w}),k.add({x:s.x+m,y:s.y+w+O+J}),k.add({x:X.x+D,y:X.y-j-O+J}),k.add({x:X.x+D,y:X.y-j})):P===H&&(J=X.x>s.x?-m:m,k.add({x:s.x+m,y:s.y-w}),k.add({x:s.x+m,y:s.y-w-O-J}),k.add({x:X.x+D,y:X.y+j+O-J}),k.add({x:X.x+D,y:X.y+j})),l&&k.reverse(),L(k,G)},!0),d("extend.north2",function(d,A,p){var P=d.getSourceAgent(),i=d.getTargetAgent(),q=P.getId()>i.getId(),_=q?i:P,l=q?P:i,Y=_.p(),n=l.p(),j=t(p,d,_,H),C=t(p,d,l,H,!0),h=d.s(y),w=h?0:$(p,_)/2,U=h?0:$(p,l)/2,R=j.offset,Z=C.offset,N=d.s(I)+(j.size-1)/2*d.s(V),f=s(Y.y-w,n.y-U)-N+(Y.x<n.x?R:-R),c=new v;return c.add({x:Y.x+R,y:Y.y-w}),c.add({x:Y.x+R,y:f}),c.add({x:n.x+Z,y:f}),c.add({x:n.x+Z,y:n.y-U}),q&&c.reverse(),L(c,d)},!0),d("extend.south2",function(Z,i,F){var S=Z.getSourceAgent(),f=Z.getTargetAgent(),P=S.getId()>f.getId(),U=P?f:S,B=P?S:f,C=U.p(),J=B.p(),m=t(F,Z,U,R),Q=t(F,Z,B,R,!0),p=Z.s(y),n=p?0:$(F,U)/2,j=p?0:$(F,B)/2,H=m.offset,E=Q.offset,G=Z.s(I)+(m.size-1)/2*Z.s(V),D=q(C.y+n,J.y+j)+G+(C.x>J.x?H:-H),M=new v;return M.add({x:C.x+H,y:C.y+n}),M.add({x:C.x+H,y:D}),M.add({x:J.x+E,y:D}),M.add({x:J.x+E,y:J.y+j}),P&&M.reverse(),L(M,Z)},!0),d("extend.west2",function(N,c,O){var j=N.getSourceAgent(),W=N.getTargetAgent(),G=j.getId()>W.getId(),D=G?W:j,w=G?j:W,g=D.p(),h=w.p(),J=t(O,N,D,H),M=t(O,N,w,H,!0),_=N.s(y),k=_?0:b(O,D)/2,d=_?0:b(O,w)/2,P=J.offset,R=M.offset,q=N.s(I)+(J.size-1)/2*N.s(V),f=s(g.x-k,h.x-d)-q+(g.y<h.y?P:-P),S=new v;return S.add({x:g.x-k,y:g.y+P}),S.add({x:f,y:g.y+P}),S.add({x:f,y:h.y+R}),S.add({x:h.x-d,y:h.y+R}),G&&S.reverse(),L(S,N)},!0),d("extend.east2",function(f,C,r){var x=f.getSourceAgent(),Q=f.getTargetAgent(),N=x.getId()>Q.getId(),$=N?Q:x,e=N?x:Q,D=$.p(),Y=e.p(),T=t(r,f,$,H),M=t(r,f,e,H,!0),U=f.s(y),A=U?0:b(r,$)/2,l=U?0:b(r,e)/2,O=T.offset,c=M.offset,K=f.s(I)+(T.size-1)/2*f.s(V),Z=q(D.x+A,Y.x+l)+K+(D.y>Y.y?O:-O),F=new v;return F.add({x:D.x+A,y:D.y+O}),F.add({x:Z,y:D.y+O}),F.add({x:Z,y:Y.y+c}),F.add({x:Y.x+l,y:Y.y+c}),N&&F.reverse(),L(F,f)},!0),d("v.h2",function(D,H,M){return g(D,M,_)},!0),d("h.v2",function(K,u,W){return g(K,W,M)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);