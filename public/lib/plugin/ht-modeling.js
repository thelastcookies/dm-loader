!function(l,z,X){"use strict";var N="ht",b=l[N],m=null,c=Math,D=c.PI,s=c.cos,T=c.sin,Q=c.abs,o=c.max,$=c.sqrt,I=1e-5,d=b.Default,k=d.def,E=d.startAnim,f=d.createMatrix,P=d.transformVec,Z=d.getInternal(),S=Z.addMethod,W=Z.superCall,i=Z.toPointsArray,a=Z.createNormals,R=Z.toFloatArray,n=Z.glMV,K=(Z.glPop,Z.batchShape),H=Z.createNodeMatrix,M=Z.getFaceInfo,q=Z.transformAppend,w=Z.drawFaceInfo,h=Z.createAnim,V=Z.cube(),A=V.is,j=V.vs,L=V.uv,g=Z.ui(),x=b.Node,p=b.Shape,Y="h",v="v",U="front",_="back",e="left",O="right",y="top",t="bottom",B="dw.expanded",G=".expanded",J="dw.angle",C=".angle",F=function(c,n,L){k(N+"."+c,n,L)},u=function(o,x,U){U?o.push(x.x,x.y):o.push(x.x,x.y,x.z)},r=function(){var u=new b.Math.Vector3,G=new b.Math.Vector3,U=new b.Math.Vector3;return function(m,F,Y,i,f){if(u.copy(F.$24n),G.copy(Y.$24n),U.copy(i.$24n),!(U.equals(u)||G.equals(u)||G.equals(U))){if(!F.$22n||!Y.$22n||!i.$22n){var z=G.sub(u).cross(U.sub(u)).normalize().multiplyScalar(1).toArray();F.$22n||(F.$22n=new Hj(z)),Y.$22n||(Y.$22n=new Hj(z)),i.$22n||(i.$22n=new Hj(z))}m.push(new od([F,Y,i],f))}}}(),Il=function(p,J,E,k){var A,d,n,Q,$=0,s=[];if(k)for(A=k.length;A>$;$+=3)d=k[$],n=k[$+1],Q=k[$+2],r(s,new Cr([J[3*d],J[3*d+1],J[3*d+2]],null,E?[E[2*d],E[2*d+1],0]:m),new Cr([J[3*n],J[3*n+1],J[3*n+2]],null,E?[E[2*n],E[2*n+1],0]:m),new Cr([J[3*Q],J[3*Q+1],J[3*Q+2]],null,E?[E[2*Q],E[2*Q+1],0]:m),p);else for(A=J.length/3;A>$;$+=3)d=$,n=$+1,Q=$+2,r(s,new Cr([J[3*d],J[3*d+1],J[3*d+2]],null,E?[E[2*d],E[2*d+1],0]:m),new Cr([J[3*n],J[3*n+1],J[3*n+2]],null,E?[E[2*n],E[2*n+1],0]:m),new Cr([J[3*Q],J[3*Q+1],J[3*Q+2]],null,E?[E[2*Q],E[2*Q+1],0]:m),p);return s},Zf=[e,U,O,_,y,t],gn=["",y,t],is=Zf.concat("csg"),af=[0,6,12,18,24,30],Un=function(g,f,V){var l=H(g),e=[];g.appendAnchorMatrix3d(l);var J,W=f?f.getData3dUI(g):null;if(W&&W.s("shape3d")&&!W.s("csg.cull.box")&&(J=W.shapeModel,W.shapeModel||(J=Z.getShapeModel(W,W.s("shape3d"))),J))for(var v=Z.createNormalMatrix(l),c=0,x=gn.length;x>c;c++){var w=gn[c],$=w.length?w+"_":w,F=J[$+"vs"],K=J[$+"uv"],T=J[$+"is"],q=J[$+"ns"];if(F&&F.length)for(var B,O,E,Q=0,R=T?T.length:F.length/3;R>Q;Q+=3)T?(B=T[Q],O=T[Q+1],E=T[Q+2]):(B=Q,O=Q+1,E=Q+2),r(e,new Cr(P([F[3*B],F[3*B+1],F[3*B+2]],l),q?P([q[3*B],q[3*B+1],q[3*B+2]],v):null,[K[2*B],K[2*B+1],0]),new Cr(P([F[3*O],F[3*O+1],F[3*O+2]],l),q?P([q[3*O],q[3*O+1],q[3*O+2]],v):null,[K[2*O],K[2*O+1],0]),new Cr(P([F[3*E],F[3*E+1],F[3*E+2]],l),q?P([q[3*E],q[3*E+1],q[3*E+2]],v):null,[K[2*E],K[2*E+1],0]),g)}if(!J)for(var c=0;6>c;c++)for(var w=Zf[c],h=af[c],K=V?f.getFaceUv(g,w):m,U=V?f.getFaceUvScale(g,w):m,C=V?f.getFaceUvOffset(g,w):m,N=0;2>N;N++){var z,d,X,D=A[h+3*N],I=A[h+3*N+1],G=A[h+3*N+2];if(V){if(K){var Y=8*c;z=[K[2*D-Y],K[2*D+1-Y],0],d=[K[2*I-Y],K[2*I+1-Y],0],X=[K[2*G-Y],K[2*G+1-Y],0]}else z=[L[2*D],L[2*D+1],0],d=[L[2*I],L[2*I+1],0],X=[L[2*G],L[2*G+1],0];U&&(z[0]*=U[0],z[1]*=U[1],d[0]*=U[0],d[1]*=U[1],X[0]*=U[0],X[1]*=U[1]),C&&(z[0]+=C[0],z[1]+=C[1],d[0]+=C[0],d[1]+=C[1],X[0]+=C[0],X[1]+=C[1])}r(e,new Cr(P([j[3*D],j[3*D+1],j[3*D+2]],l),null,z),new Cr(P([j[3*I],j[3*I+1],j[3*I+2]],l),null,d),new Cr(P([j[3*G],j[3*G+1],j[3*G+2]],l),null,X),g)}return Sm.$15n(e)},cc=function(q,b){var p,n=q.data.getAttaches();if(n&&n.each(function(X){X instanceof Tp&&X.s("attach.operation")&&(p||(p=[]),p.push(X))}),p){var F;Zf.forEach(function(H){var s=Il(H,q[H].vs,q[H].tuv);F=F?F.concat(s):s}),F=Sm.$15n(F),p.forEach(function(g){var Z=g.s("attach.operation");F[Z]&&(F=F[Z](Un(g,q.gv,q.csg.tuv)))}),Zf.forEach(function(W){W=q[W],W.vs=[],W.ns=[],W.tuv&&(W.tuv=[])}),q.csg&&!q.csg.ns&&(q.csg.ns=[]);var f=[];if(F.$19n().forEach(function(E){var e,X=E.$10n;if(X instanceof Tp){if(X.s("attach.cull"))return;e=X.s("csg.cull.color"),e&&(e=Z.toColorArray(e)),X="csg"}for(var P=q[X],$=P.vs,l=P.ns,b=P.tuv,z=E.$9n,s=2;s<z.length;s++)if(u($,z[0].$24n),u($,z[s-1].$24n),u($,z[s].$24n),l&&(u(l,z[0].$22n),u(l,z[s-1].$22n),u(l,z[s].$22n)),b&&(u(b,z[0].uv,!0),u(b,z[s-1].uv,!0),u(b,z[s].uv,!0)),e)for(var k=4*($.length/3),V=0;3>V;V++)f[--k]=e[3],f[--k]=e[2],f[--k]=e[1],f[--k]=e[0]}),f.length){for(var d=Z.toColorArray(q.csg.color),W=0,w=4*(q.csg.vs.length/3);w>W;W+=4)f[W]==X&&(f[W]=d[0],f[W+1]=d[1],f[W+2]=d[2],f[W+3]=d[3]);q.csg.cs=f}}is.forEach(function(t){var U=q[t];U.visible&&U.vs.length?(U.ns&&U.ns.length?R(U,"ns"):U.ns=a(U.vs),R(U,"vs"),R(U,"tuv"),U.cs&&R(U,"cs")):delete q[t]}),b&&(K(q,m,b),q.clear())};S(d,{createFrameModel:function(z,F,e,r){z=z==m?.07:z,F=F==m?z:F,e=e==m?z:e,r=r?r:{};var E=r.top,c=r.bottom,n=r.left,O=r.right,G=r.front,W=r.back,Z=[],j=[];return G===!0?(Z.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),j.push(0,0,0,1,1,1,1,1,1,0,0,0)):G===!1||(Z.push(-.5,.5,.5,-.5,-.5,.5,-.5+z,-.5,.5,-.5+z,-.5,.5,-.5+z,.5,.5,-.5,.5,.5,.5-z,.5,.5,.5-z,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-z,.5,.5,-.5+z,.5,.5,-.5+z,.5-F,.5,.5-z,.5-F,.5,.5-z,.5-F,.5,.5-z,.5,.5,-.5+z,.5,.5,-.5+z,-.5+F,.5,-.5+z,-.5,.5,.5-z,-.5,.5,.5-z,-.5,.5,.5-z,-.5+F,.5,-.5+z,-.5+F,.5),j.push(0,0,0,1,z,1,z,1,z,0,0,0,1-z,0,1-z,1,1,1,1,1,1,0,1-z,0,z,0,z,F,1-z,F,1-z,F,1-z,0,z,0,z,1-F,z,1,1-z,1,1-z,1,1-z,1-F,z,1-F)),W===!0?(Z.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),j.push(1,0,0,1,1,1,0,1,1,0,0,0)):W===!1||(Z.push(-.5,.5,-.5,-.5+z,-.5,-.5,-.5,-.5,-.5,-.5+z,-.5,-.5,-.5,.5,-.5,-.5+z,.5,-.5,.5-z,.5,-.5,.5,-.5,-.5,.5-z,-.5,-.5,.5,-.5,-.5,.5-z,.5,-.5,.5,.5,-.5,-.5+z,.5,-.5,.5-z,.5-F,-.5,-.5+z,.5-F,-.5,.5-z,.5-F,-.5,-.5+z,.5,-.5,.5-z,.5,-.5,-.5+z,-.5+F,-.5,.5-z,-.5,-.5,-.5+z,-.5,-.5,.5-z,-.5,-.5,-.5+z,-.5+F,-.5,.5-z,-.5+F,-.5),j.push(1,0,1-z,1,1,1,1-z,1,1,0,1-z,0,z,0,0,1,z,1,0,1,z,0,0,0,1-z,0,z,F,1-z,F,z,F,1-z,0,z,0,1-z,1-F,z,1,1-z,1,z,1,1-z,1-F,z,1-F)),n===!0?(Z.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),j.push(0,0,0,1,1,1,1,1,1,0,0,0)):n===!1||(Z.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+e,-.5,-.5,-.5+e,-.5,.5,-.5+e,-.5,.5,-.5,-.5,.5,.5-e,-.5,-.5,.5-e,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-e,-.5,.5,-.5+e,-.5,.5-F,-.5+e,-.5,.5-F,.5-e,-.5,.5-F,.5-e,-.5,.5,.5-e,-.5,.5,-.5+e,-.5,-.5+F,-.5+e,-.5,-.5,-.5+e,-.5,-.5,.5-e,-.5,-.5,.5-e,-.5,-.5+F,.5-e,-.5,-.5+F,-.5+e),j.push(0,0,0,1,e,1,e,1,e,0,0,0,1-e,0,1-e,1,1,1,1,1,1,0,1-e,0,e,0,e,F,1-e,F,1-e,F,1-e,0,e,0,e,1-F,e,1,1-e,1,1-e,1,1-e,1-F,e,1-F)),O===!0?(Z.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),j.push(1,0,0,1,1,1,0,1,1,0,0,0)):O===!1||(Z.push(.5,.5,-.5,.5,-.5,-.5+e,.5,-.5,-.5,.5,-.5,-.5+e,.5,.5,-.5,.5,.5,-.5+e,.5,.5,.5-e,.5,-.5,.5,.5,-.5,.5-e,.5,-.5,.5,.5,.5,.5-e,.5,.5,.5,.5,.5,-.5+e,.5,.5-F,.5-e,.5,.5-F,-.5+e,.5,.5-F,.5-e,.5,.5,-.5+e,.5,.5,.5-e,.5,-.5+F,-.5+e,.5,-.5,.5-e,.5,-.5,-.5+e,.5,-.5,.5-e,.5,-.5+F,-.5+e,.5,-.5+F,.5-e),j.push(1,0,1-e,1,1,1,1-e,1,1,0,1-e,0,e,0,0,1,e,1,0,1,e,0,0,0,1-e,0,e,F,1-e,F,e,F,1-e,0,e,0,1-e,1-F,e,1,1-e,1,e,1,1-e,1-F,e,1-F)),E===!0?(Z.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),j.push(1,1,1,0,0,0,0,0,0,1,1,1)):E===!1||(Z.push(.5,.5,.5,.5,.5,-.5,.5-z,.5,-.5,.5-z,.5,-.5,.5-z,.5,.5,.5,.5,.5,-.5+z,.5,.5,-.5+z,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+z,.5,.5,.5-z,.5,.5,.5-z,.5,.5-e,-.5+z,.5,.5-e,-.5+z,.5,.5-e,-.5+z,.5,.5,.5-z,.5,.5,.5-z,.5,-.5+e,.5-z,.5,-.5,-.5+z,.5,-.5,-.5+z,.5,-.5,-.5+z,.5,-.5+e,.5-z,.5,-.5+e),j.push(1,1,1,0,1-z,0,1-z,0,1-z,1,1,1,z,1,z,0,0,0,0,0,0,1,z,1,1-z,1,1-z,1-e,z,1-e,z,1-e,z,1,1-z,1,1-z,e,1-z,0,z,0,z,0,z,e,1-z,e)),c===!0?(Z.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),j.push(1,0,0,1,1,1,0,1,1,0,0,0)):c===!1||(Z.push(.5,-.5,.5,.5-z,-.5,-.5,.5,-.5,-.5,.5-z,-.5,-.5,.5,-.5,.5,.5-z,-.5,.5,-.5+z,-.5,.5,-.5,-.5,-.5,-.5+z,-.5,-.5,-.5,-.5,-.5,-.5+z,-.5,.5,-.5,-.5,.5,.5-z,-.5,.5,-.5+z,-.5,.5-e,.5-z,-.5,.5-e,-.5+z,-.5,.5-e,.5-z,-.5,.5,-.5+z,-.5,.5,.5-z,-.5,-.5+e,-.5+z,-.5,-.5,.5-z,-.5,-.5,-.5+z,-.5,-.5,.5-z,-.5,-.5+e,-.5+z,-.5,-.5+e),j.push(1,0,1-z,1,1,1,1-z,1,1,0,1-z,0,z,0,0,1,z,1,0,1,z,0,0,0,1-z,0,z,e,1-z,e,z,e,1-z,0,z,0,1-z,1-e,z,1,1-z,1,z,1,1-z,1-e,z,1-e)),{vs:Z,uv:j}}}),S(b.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":X,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":D/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),Zf.forEach(function(J){var l={};l[J+G]=!1,l[J+".toggleable"]=!1,l[J+".axis"]=e,l[J+".start"]=0,l[J+".end"]=D/2,l[J+C]=0,S(b.Style,l,!0)});var Sm=function(){this.$4n=[]};Sm.$15n=function(O){var l=new Sm;return l.$4n=O,l},Sm.prototype={clone:function(){var O=new Sm;return O.$4n=this.$4n.map(function(j){return j.clone()}),O},$19n:function(){return this.$4n},union:function(J){var p=new lp(this.clone().$4n),e=new lp(J.clone().$4n);return p.$3n(e),e.$3n(p),e.$6n(),e.$3n(p),e.$6n(),p.$7n(e.$2n()),Sm.$15n(p.$2n())},subtract:function(f){var v=new lp(this.clone().$4n),A=new lp(f.clone().$4n);return v.$6n(),v.$3n(A),A.$3n(v),A.$6n(),A.$3n(v),A.$6n(),v.$7n(A.$2n()),v.$6n(),Sm.$15n(v.$2n())},intersect:function(W){var g=new lp(this.clone().$4n),V=new lp(W.clone().$4n);return g.$6n(),V.$3n(g),V.$6n(),g.$3n(V),V.$3n(g),g.$7n(V.$2n()),g.$6n(),Sm.$15n(g.$2n())},inverse:function(){var F=this.clone();return F.$4n.map(function(S){S.flip()}),F}},Sm.cube=function(v){v=v||{};var $=new Hj(v.center||[0,0,0]),J=v.radius?v.radius.length?v.radius:[v.radius,v.radius,v.radius]:[1,1,1];return Sm.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(t){return new od(t[0].map(function(l){var H=new Hj($.x+J[0]*(2*!!(1&l)-1),$.y+J[1]*(2*!!(2&l)-1),$.z+J[2]*(2*!!(4&l)-1));return new Cr(H,new Hj(t[1]))}))}))},Sm.sphere=function(j){function G(x,u){x*=2*D,u*=D;var P=new Hj(s(x)*T(u),s(u),T(x)*T(u));c.push(new Cr(I.$20n(P.$21n(g)),P))}j=j||{};for(var c,I=new Hj(j.center||[0,0,0]),g=j.radius||1,k=j.slices||16,v=j.stacks||8,r=[],f=0;k>f;f++)for(var O=0;v>O;O++)c=[],G(f/k,O/v),O>0&&G((f+1)/k,O/v),v-1>O&&G((f+1)/k,(O+1)/v),G(f/k,(O+1)/v),r.push(new od(c));return Sm.$15n(r)},Sm.cylinder=function(F){function Z(X,p,t){var v=2*p*D,o=O.$21n(s(v)).$20n(N.$21n(T(v))),V=$.$20n(P.$21n(X)).$20n(o.$21n(d)),r=o.$21n(1-Q(t)).$20n(y.$21n(t));return new Cr(V,r)}F=F||{};for(var $=new Hj(F.start||[0,-1,0]),p=new Hj(F.end||[0,1,0]),P=p.$13n($),d=F.radius||1,z=F.slices||16,y=P.$14n(),r=Q(y.y)>.5,O=new Hj(r,!r,0).cross(y).$14n(),N=O.cross(y).$14n(),j=new Cr($,y.$11n()),K=new Cr(p,y.$14n()),t=[],L=0;z>L;L++){var x=L/z,E=(L+1)/z;t.push(new od([j,Z(0,x,-1),Z(0,E,-1)])),t.push(new od([Z(0,E,0),Z(0,x,0),Z(1,x,0),Z(1,E,0)])),t.push(new od([K,Z(1,E,1),Z(1,x,1)]))}return Sm.$15n(t)};var Hj=function(k,F,S){var C=this;3==arguments.length?(C.x=k,C.y=F,C.z=S):"x"in k?(C.x=k.x,C.y=k.y,C.z=k.z):(C.x=k[0],C.y=k[1],C.z=k[2])};Hj.prototype={clone:function(){return new Hj(this.x,this.y,this.z)},$11n:function(){return new Hj(-this.x,-this.y,-this.z)},$20n:function(e){return new Hj(this.x+e.x,this.y+e.y,this.z+e.z)},$13n:function(I){return new Hj(this.x-I.x,this.y-I.y,this.z-I.z)},$21n:function(a){return new Hj(this.x*a,this.y*a,this.z*a)},$16n:function(n){return new Hj(this.x/n,this.y/n,this.z/n)},$23n:function(_){return this.x*_.x+this.y*_.y+this.z*_.z},lerp:function(v,y){return this.$20n(v.$13n(this).$21n(y))},length:function(){return $(this.$23n(this))},$14n:function(){return this.$16n(this.length())},cross:function(q){var L=this;return new Hj(L.y*q.z-L.z*q.y,L.z*q.x-L.x*q.z,L.x*q.y-L.y*q.x)}};var Cr=function(U,E,j){var d=this;d.$24n=new Hj(U),d.$22n=E?new Hj(E):null,d.uv=j?new Hj(j):null};Cr.prototype={clone:function(){var F=this;return new Cr(F.$24n.clone(),F.$22n.clone(),F.uv?F.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(G,C){var _=this;return new Cr(_.$24n.lerp(G.$24n,C),_.$22n.lerp(G.$22n,C),_.uv?_.uv.lerp(G.uv,C):null)}};var ui=function(a,X){this.$22n=a,this.w=X};ui.$17n=function(r,f,y){var A=f.$13n(r).cross(y.$13n(r)).$14n();return new ui(A,A.$23n(r))},ui.prototype={clone:function(){return new ui(this.$22n.clone(),this.w)},flip:function(){var m=this;m.$22n=m.$22n.$11n(),m.w=-m.w},$5n:function(V,j,r,b,J){for(var P=this,v=0,U=1,z=2,f=3,$=0,M=[],i=0;i<V.$9n.length;i++){var c=P.$22n.$23n(V.$9n[i].$24n)-P.w,H=-I>c?z:c>I?U:v;$|=H,M.push(H)}switch($){case v:(P.$22n.$23n(V.$8n.$22n)>0?j:r).push(V);break;case U:b.push(V);break;case z:J.push(V);break;case f:for(var E=[],W=[],i=0;i<V.$9n.length;i++){var B=(i+1)%V.$9n.length,R=M[i],O=M[B],Z=V.$9n[i],y=V.$9n[B];if(R!=z&&E.push(Z),R!=U&&W.push(R!=z?Z.clone():Z),(R|O)==f){var c=(P.w-this.$22n.$23n(Z.$24n))/P.$22n.$23n(y.$24n.$13n(Z.$24n)),C=Z.$18n(y,c);E.push(C),W.push(C.clone())}}E.length>=3&&b.push(new od(E,V.$10n)),W.length>=3&&J.push(new od(W,V.$10n))}}};var od=function(J,s){var h=this;h.$9n=J,h.$10n=s,h.$8n=ui.$17n(J[0].$24n,J[1].$24n,J[2].$24n)};od.prototype={clone:function(){var B=this.$9n.map(function(o){return o.clone()});return new od(B,this.$10n)},flip:function(){this.$9n.reverse().map(function(s){s.flip()}),this.$8n.flip()}};var lp=function(h){var z=this;z.$8n=null,z.front=null,z.back=null,z.$4n=[],h&&z.$7n(h)};lp.prototype={clone:function(){var B=this,A=new lp;return A.$8n=B.$8n&&B.$8n.clone(),A.front=B.front&&B.front.clone(),A.back=B.back&&B.back.clone(),A.$4n=B.$4n.map(function(e){return e.clone()}),A},$6n:function(){for(var J=this,w=0;w<J.$4n.length;w++)J.$4n[w].flip();J.$8n&&J.$8n.flip(),J.front&&J.front.$6n(),J.back&&J.back.$6n();var j=J.front;J.front=J.back,J.back=j},$1n:function(H){var X=this;if(!X.$8n)return H.slice();for(var Q=[],S=[],x=0;x<H.length;x++)X.$8n.$5n(H[x],Q,S,Q,S);return X.front&&(Q=X.front.$1n(Q)),S=X.back?X.back.$1n(S):[],Q.concat(S)},$3n:function(b){var S=this;S.$4n=b.$1n(S.$4n),S.front&&S.front.$3n(b),S.back&&S.back.$3n(b)},$2n:function(){var A=this,C=A.$4n.slice();return A.front&&(C=C.concat(A.front.$2n())),A.back&&(C=C.concat(A.back.$2n())),C},$7n:function(k){var u=this;if(k.length){u.$8n||(u.$8n=k[0].$8n.clone());for(var R=[],O=[],A=0;A<k.length;A++)this.$8n.$5n(k[A],u.$4n,u.$4n,R,O);R.length&&(u.front||(u.front=new lp),this.front.$7n(R)),O.length&&(u.back||(u.back=new lp),u.back.$7n(O))}}};var Cm="symbol",hl=b.Symbol=function(F,N,p){var r=this;W(hl,r),r.s3(20,20,20),r.s({"all.visible":!1,shape:"rect"}),r.setIcon(F,N,p)};F("Symbol",x,{setIcon:function(k,g,v){var r,x=this;return hl.superClass.setIcon.call(x,k),k?(r={for3d:!0,face:"center",position:44,names:[k]},v&&(r.transaprent=!0),g&&(r.autorotate=g),x.addStyleIcon(Cm,r)):x.removeStyleIcon(Cm),x.setWidth(Z.getImageWidth(d.getImage(k),x)||20),r}});var Tp=b.CSGNode=function(){W(Tp,this),this.s({shape:"rect","attach.thickness":1.001,"2d.attachable":!0})},Le={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,anchor:1,anchorElevation:1,"s:attach.cull":1,"s:attach.operation":1};F("CSGNode",x,{_22Q:function(){return ve},onPropertyChanged:function(f){var s=this,h=s.getHost();Tp.superClass.onPropertyChanged.call(s,f),Le[f.property]&&(h instanceof zh||h instanceof Tp)&&h.fp("csgNodeChange",!0,!1)}});var ve=function(V,t){W(ve,this,[V,t])};k(ve,g.Node3dUI,{_80o:function(u,O,W){var b=this;b._shape3d?ve.superClass._80o.call(b,u,O,W):(n(b.gv),is.forEach(function(c){w(b,u,O,c,W)}))},validate:function(w,c){var p=this,d=p.gv,$=p.data;if($.s("shape3d"))return ve.superClass.validate.call(p,w,c),p._shape3d=!0,void 0;p._shape3d=!1;var F=H($,d.getMat($));$.appendAnchorMatrix3d(F);var Z=w&&w.uv;p.vf2("csg",Z);for(var t=0;6>t;t++)for(var O=Zf[t],B=af[t],k=p.vf2(O,Z,c),V=k.mat||F,o=k.vs,n=k.uv,Q=k.tuv,N=0;2>N;N++){var K=A[B+3*N],x=A[B+3*N+1],i=A[B+3*N+2];if(q(o,V,[j[3*K],j[3*K+1],j[3*K+2]]),q(o,V,[j[3*x],j[3*x+1],j[3*x+2]]),q(o,V,[j[3*i],j[3*i+1],j[3*i+2]]),Q)if(n){var I=8*t;Q.push(n[2*K-I],n[2*K+1-I],n[2*x-I],n[2*x+1-I],n[2*i-I],n[2*i+1-I])}else Q.push(L[2*K],L[2*K+1],L[2*x],L[2*x+1],L[2*i],L[2*i+1])}cc(p,w,c)},vf2:function(L,n,B){var w,l=this,p=l.gv.getFaceVisible(l.data,L);return w=M(l,L,B),w.vs=[],w.tuv=p&&(w.texture||n)?[]:m,w.visible=p,w}});var zh=b.CSGShape=function(){var x=this;W(zh,x),x.s({"shape.background":m,"2d.hostable":!0,"shape.border.width":8}),x.setTall(240),x.setElevation(120),x.setThickness(14)};F("CSGShape",p,{IRotatable:!1,_22Q:function(){return Gk},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var Gk=function(f,Y){W(Gk,this,[f,Y])};k(Gk,g.Shape3dUI,{_80o:function(G,v,h){var U=this;U.undrawable||(n(U.gv),is.forEach(function(Y){w(U,G,v,Y,h)}))},validate:function(s,g){var C=this,z=C.data,y=z.getPoints();if(C.undrawable=y.size()<2)return C.clear(),void 0;var $=z.isClosePath(),F=o(z._thickness/2,I),q=i(y,m,m,$);is.forEach(function(r){C.vf(r,s&&s.uv,!0,g)}),$&&(C.left.visible=!1,C.right.visible=!1),C._12O(q,F),C._20Q(q);var T=z.getPointsMatrix3d(),d=b.Math.requestVector3();Zf.forEach(function(g){if(C[g])for(var U=C[g].vs,v=0,H=U.length;H>v;v+=3)d.set(U[v],U[v+1],U[v+2]).applyMatrix4(T),U[v]=d.x,U[v+1]=d.y,U[v+2]=d.z}),b.Math.releaseVector3(d),cc(C,s,g)}});var Sb=b.DoorWindow=function(){var z=this;W(Sb,z),z.setElevation(100),z.s3(100,200,14)};F("DoorWindow",Tp,{IDoorWindow:!0,toggle:function(U){this.setExpanded(!this.s(B),U)},isExpanded:function(){return this.s(B)},setExpanded:function(f,Y){var L=this,O=L.$25n,r=L.getDataModel(),b=L.s(B);if(O&&(O.stop(!0),delete L.$25n),b!==f){r&&r.beginTransaction();var w=f?L.s("dw.end"):L.s("dw.start");L.s(B,f),Y=h(Y),Y?(b=L.s(J),Y.action=function(T){L.s(J,b+(w-b)*T)},Y.finishFunc=function(){r&&r.endTransaction()},L.$25n=E(Y)):(L.s(J,w),r&&r.endTransaction())}},getMat:function(){var i=this,p=i.s("dw.s3"),E=i.s("dw.t3"),F=i.s("dw.flip"),q=i.s(J);if(p||q||E||F){var S=[];if(F&&S.push({r3:[0,D,0]}),p&&S.push({s3:p}),q){p=i.getFinalScale3d();var X=i.s("dw.axis"),l=p[0]/2,n=p[1]/2;p[2]/2,X===e?S.push({t3:[l,0,0]},{r3:[0,-q,0]},{t3:[-l,0,0]}):X===O?S.push({t3:[-l,0,0]},{r3:[0,q,0]},{t3:[l,0,0]}):X===y?S.push({t3:[0,-n,0]},{r3:[-q,0,0]},{t3:[0,n,0]}):X===t?S.push({t3:[0,n,0]},{r3:[q,0,0]},{t3:[0,-n,0]}):X===v?S.push({r3:[0,q,0]}):X===Y&&S.push({r3:[q,0,0]})}return E&&S.push({t3:E}),f(S)}return m}});var zr=b.CSGBox=function(){var j=this;W(zr,j),j.setElevation(100),j.s3(100,200,100)};F("CSGBox",Tp,{ICSGBox:!0,toggleFace:function(R,n){this.setFaceExpanded(R,!this.s(R+G),n)},isFaceExpanded:function(e){return this.s(e+G)},setFaceExpanded:function(Q,S,d){var i=this,r=i.$25n,q=i.s(Q+G);if(r&&(r.stop(!0),delete i.$25n),q!==S){var Y=S?i.s(Q+".end"):i.s(Q+".start");i.s(Q+G,S),d=h(d),d?(q=i.s(Q+C),d.action=function(V){i.s(Q+C,q+(Y-q)*V)},i.$25n=E(d)):i.s(Q+C,Y)}},getFaceMat:function(d){var O=this,v=O.s(d+C);if(!v)return m;var n,u,W,X,l,V,M=O.s(d+".axis"),U=O.getFinalScale3d(),t=O.getAnchor3d(),j=U[0]*t.x,N=U[1]*t.y,L=U[2]*t.z,c=U[0]-j,R=U[1]-N,w=U[2]-L,y=d+"_"+M;switch(y){case"front_left":n=-j,u=0,W=w,X=0,l=-v,V=0;break;case"front_right":n=c,u=0,W=w,X=0,l=v,V=0;break;case"front_top":n=0,u=R,W=w,X=-v,l=0,V=0;break;case"front_bottom":n=0,u=-N,W=w,X=v,l=0,V=0;break;case"front_h":n=0,u=0,W=w,X=v,l=0,V=0;break;case"front_v":n=0,u=0,W=w,X=0,l=v,V=0;break;case"back_left":n=c,u=0,W=-L,X=0,l=-v,V=0;break;case"back_right":n=-j,u=0,W=-L,X=0,l=v,V=0;break;case"back_top":n=0,u=R,W=-L,X=v,l=0,V=0;break;case"back_bottom":n=0,u=-N,W=-L,X=-v,l=0,V=0;break;case"back_h":n=0,u=0,W=-L,X=v,l=0,V=0;break;case"back_v":n=0,u=0,W=-L,X=0,l=v,V=0;break;case"left_left":n=-j,u=0,W=-L,X=0,l=-v,V=0;break;case"left_right":n=-j,u=0,W=w,X=0,l=v,V=0;break;case"left_top":n=-j,u=R,W=0,X=0,l=0,V=-v;break;case"left_bottom":n=-j,u=-N,W=0,X=0,l=0,V=v;break;case"left_h":n=-j,u=0,W=0,X=0,l=0,V=v;break;case"left_v":n=-j,u=0,W=0,X=0,l=v,V=0;break;case"right_left":n=c,u=0,W=w,X=0,l=-v,V=0;break;case"right_right":n=c,u=0,W=-L,X=0,l=v,V=0;break;case"right_top":n=c,u=R,W=0,X=0,l=0,V=v;break;case"right_bottom":n=c,u=-N,W=0,X=0,l=0,V=-v;break;case"right_h":n=c,u=0,W=0,X=0,l=0,V=v;break;case"right_v":n=c,u=0,W=0,X=0,l=v,V=0;break;case"top_left":n=-j,u=R,W=0,X=0,l=0,V=v;break;case"top_right":n=c,u=R,W=0,X=0,l=0,V=-v;break;case"top_top":n=0,u=R,W=-L,X=-v,l=0,V=0;break;case"top_bottom":n=0,u=R,W=w,X=v,l=0,V=0;break;case"top_h":n=0,u=R,W=0,X=v,l=0,V=0;break;case"top_v":n=0,u=R,W=0,X=0,l=0,V=v;break;case"bottom_left":n=-j,u=-N,W=0,X=0,l=0,V=-v;break;case"bottom_right":n=c,u=-N,W=0,X=0,l=0,V=v;break;case"bottom_top":n=0,u=-N,W=w,X=-v,l=0,V=0;break;case"bottom_bottom":n=0,u=-N,W=-L,X=v,l=0,V=0;break;case"bottom_h":n=0,u=-N,W=0,X=v,l=0,V=0;break;case"bottom_v":n=0,u=-N,W=0,X=0,l=0,V=v}return f([{t3:[-n,-u,-W]},{r3:[X,l,V]},{t3:[n,u,W]}])}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);