!function(K,k){"use strict";var G="ht",C=G+".graph.",N=K[G],v=N.graph,X=N.Default,I=N.Color,B=null,U="px",F=X.getInternal(),A=F.getPinchDist,t=X.preventDefault,H=X.getTouchCount,E=X.startDragging;F.addMethod(X,{overviewBackground:I.widgetBackground,overviewMaskBackground:I.transparent,overviewContentBorderColor:I.widgetBorder,overviewContentBackground:I.background},!0),v.Overview=function(U){var z=this,E=z._view=F.createView(1,z);z._canvas=F.createCanvas(E),E.style.background=X.overviewBackground,E.appendChild(z._mask=F.createDiv()),z.setGraphView(U),z.addListeners()},X.def(C+"Overview",k,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:X.overviewMaskBackground,_contentBorderColor:X.overviewContentBorderColor,_contentBackground:X.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(V){var M=this;if(M.gv!==V){var Y=M.gv;M.gv=V,Y&&(Y.removeViewListener(M.handleGraphViewChanged,M),Y.ump(M.handleGraphViewPropertyChanged,M)),V&&(V.addViewListener(M.handleGraphViewChanged,M),V.mp(M.handleGraphViewPropertyChanged,M)),M.fp("graphView",Y,V),M.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(G){this._autoUpdate&&"validate"===G.kind&&this.redraw()},handleGraphViewPropertyChanged:function(e){("canvasBackground"===e.property||this.getFixToRect()&&("zoom"===e.property||"translateX"===e.property||"translateY"===e.property))&&this.redraw()},redraw:function(){var V=this;V._redraw||(V._redraw=1,V.iv(50))},validateImpl:function(){var n=this,I=n.gv,p=n._canvas,g=n.getWidth(),c=n.getHeight(),N=n._redraw;if(I){var k=n._mask,q=k.style,K=I.getViewRect(),x=this.getFixToRect(),G=x?"boolean"==typeof x?I.getContentRect():x:I.getScrollRect(),r=G.x,y=G.y,D=G.width,Z=G.height,w=n._rate=Math.max(D/g,Z/c),A=n._x=(g-D/w)/2,i=n._y=(c-Z/w)/2;if(0!==K.width&&0!==K.height||n.hasRetry||(X.callLater(n.iv,n,B),n.hasRetry=!0),(g!==p.clientWidth||c!==p.clientHeight)&&(F.setCanvas(p,g,c),N=1),F.isSameRect(G,n._scrollRect)||(n._scrollRect=G,N=1),N){var Q=F.initContext(p),C=I.getDataModel(),v=C.getBackground()||n._contentBackground,S=n._contentBorderColor,f=X.devicePixelRatio;Q.clearRect(0,0,g*f,c*f);var j=C.getBackground()&&C.a("width")>0&&C.a("height")>0;v&&!j&&F.fillRect(Q,A*f,i*f,D/w*f,Z/w*f,v),F.translateAndScale(Q,-r/w+A,-y/w+i,1/w),I._42(Q),Q.restore(),S&&F.drawBorder(Q,S,A*f,i*f,D/w*f,Z/w*f)}q.background=n._maskBackground,q.left=A+(K.x-r)/w+U,q.top=i+(K.y-y)/w+U,q.width=K.width/w+U,q.height=K.height/w+U,n._redraw=null}else if(N){var Q=F.initContext(p);Q.clearRect(0,0,g,c),Q.restore(),n._redraw=null}},center:function(H){var n=this,g=n.gv;if(g){var A=g._zoom,d=g._29I,m=n._rate,E=n._scrollRect,Z=X.getLogicalPoint(H,n._canvas),q=E.x+(Z.x-n._x)*m,W=E.y+(Z.y-n._y)*m;g.setTranslate((d.width/2-q)*A,(d.height/2-W)*A)}},handle_mousedown:function(z){this.handle_touchstart(z)},handleWindowMouseUp:function(D){this.handleWindowTouchEnd(D)},handleWindowMouseMove:function(M){this.handleWindowTouchMove(M)},handle_mousewheel:function(w){this.handleScroll(w,w.wheelDelta)},handle_DOMMouseScroll:function(d){2===d.axis&&this.handleScroll(d,-d.detail)},handleScroll:function(o,v){if(t(o),this.gv){var W=this.gv;v>0?W.scrollZoomIn():0>v&&W.scrollZoomOut()}},handle_touchstart:function(w){if(t(w),this.gv&&X.isLeftButton(w)){var k=this,x=k.gv,D=H(w);1===D?X.isDoubleClick(w)&&x.isResettable()?x.reset():(k.center(w),E(k,w)):2===D&&(k._dist=A(w),E(k,w))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(Q){if(this.gv){var f=this,S=f._dist,n=H(Q);1===n?f.center(Q):2===n&&S!=B&&f.gv.handlePinch(B,A(Q),S)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);