!function(Y,e,n){"use strict";var K="px",S="0",q="innerHTML",s="className",M=ht.Default,X=ht.Color,w=ht.Node,O="position",H="top",o="left",g=M.animate,Z=M.getInternal(),i="width",S="0",r="none",F="max-height",C="font",I="background",m="border-box",Q="user-select",h="box-sizing",D="overflow",p=M.isTouchable,j=M.isTouchEvent,Z=M.getInternal(),t=X.titleIconBackground,v=M.scrollBarInteractiveSize,x=/msie 9/.test(Y.navigator?Y.navigator.userAgent.toLowerCase():""),b=null,d=function(){return document},N=function(u){return d().createElement(u)},G=function(){return N("div")},z=function(){var v=G(),j=v.style;return j.msTouchAction=r,j.cursor="default",p&&j.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",b),j.position="absolute",j.left=S,j.top=S,v},f=function(){return N("canvas")},T=function(){return document.body},E=function(j,T,X){j.style.setProperty(T,X,b)},l=function(s,G){s.style.removeProperty(G)},B=function(e,y,R){M.def(ht.widget[e],y,R)},c=function(N,T){N.appendChild(T)},V=function(g,Y){g.removeChild(Y)},L=Z.addEventListener;Z.removeEventListener,Z.addMethod(M,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:t,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:t}]},paletteTitleLabelColor:M.labelSelectColor,paletteTitleLabelFont:M.labelFont,paletteContentLabelFont:M.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:M.widgetTitleHeight,paletteTitleBackground:X.titleBackground,paletteTitleHoverBackground:X.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:n,paletteItemHoverBorderColor:X.highlight,paletteItemSelectBackground:X.highlight},!0);var $=".palette-item:hover{border: 1px solid "+M.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+M.paletteTitleHoverBackground+" !important}",U=document.createElement("style");p||(U.styleSheet?U.styleSheet.cssText=$:U.appendChild(d().createTextNode($))),d().getElementsByTagName("head")[0].appendChild(U);var W=function(P){var U=this;U.$22h=P,U.addListeners()};M.def(W,e,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var y=this;y.$36h&&T().removeChild(y.$36h),y.$23h=y.$24h=y.$25h=y.$35h=y.$36h=b},handle_touchstart:function(e){for(var N,B=this,u=B.$22h,D=e.target,C=u.sm(),Z=u.dm(),q="palette-header",c="palette-header-tool",O="palette-item",h=!1,W=!1,$=!1;D&&(D[s]||"").indexOf(q)<0&&(D[s]||"").indexOf(O)<0;)D=D.parentNode;if(D&&D[s].indexOf(c)>=0?h=!0:D&&D[s].indexOf(q)>=0?$=!0:D&&D[s].indexOf(O)>=0&&(W=!0),M.isLeftButton(e))if(B.$27h(e))B.$24h=M.getClientPoint(e),B.$25h=u.ty();else if(h){M.preventDefault(e),N=D.parentNode.$11h;var I=Z.getDataById(N),p=I.s("tools")[D.toolIndex];p.action&&p.action.call(u)}else if($){M.preventDefault(e),N=D.$11h;var I=Z.getDataById(N);I.isExpanded()?I.setExpanded(!1):I.setExpanded(!0)}else if(W){N=D.$11h;var Q=Z.getDataById(N);C.ss(Q),u.handleDragAndDrop&&(M.preventDefault(e),Q.s("draggable")&&(u.handleDragAndDrop(e,"prepare"),B.$35h=0)),Q.s("draggable")||(M.preventDefault(e),B.$24h=M.getClientPoint(e),B.$25h=u.ty())}else M.preventDefault(e),B.$24h=M.getClientPoint(e),B.$25h=u.ty();else B.$26h(e)},handle_mousedown:function(E){this.handle_touchstart(E)},handle_mousewheel:function(s){this.handleScroll(s,s.wheelDelta/40,s.wheelDelta!==s.wheelDeltaX)},handle_DOMMouseScroll:function(A){this.handleScroll(A,-A.detail,1)},handleScroll:function(g,u,n){var I=this.$22h;M.preventDefault(g),n&&I._41o()&&I.ty(I.ty()+20*u)},handle_mouseup:function($){this.handle_touchend($)},handle_touchend:function(y){var W=this;W.$37h(y),W.$26h(y)},handleWindowMouseUp:function(s){this.handleWindowTouchEnd(s)},handleWindowTouchEnd:function(k){var R=this;R.$37h(k),R.$26h(k)},$37h:function(c){var l=this,$=l.$22h;2===l.$35h&&(l.$35h=3,$.handleDragAndDrop(c,"end"))},handleWindowMouseMove:function(N){this.handleWindowTouchMove(N)},handleWindowTouchMove:function(T){var A=this,C=A.$22h,G=A.$23h,v=A.$24h,X=A.$25h,D=M.getClientPoint(T),E=C._29I,c=A.$36h;if(1===A.$35h||2===A.$35h){if(A.$35h=2,C.handleDragAndDrop(T,"between"),j(T)){var L=T.touches[0];T=L?L:T.changedTouches[0]}c.style.left=T.pageX-parseInt(c.width)/2+K,c.style.top=T.pageY-parseInt(c.height)/2+K}else"p"===G?C.ty(X+D.y-v.y):"v"===G&&C.ty(X+(v.y-D.y)/E.height*C._59I)},handle_mousemove:function(f){this.handle_touchmove(f)},handle_touchmove:function(y){if(!M.isDragging()&&M.isLeftButton(y)){var U=this,t=U.$22h,D=U.$27h(y);if(U.$24h){if(!U.$23h){if(M.getDistance(M.getClientPoint(y),U.$24h)<2)return;U.$23h=D?"v":"p",M.startDragging(U,y)}}else if(D)t._43o();else if(0===U.$35h){if(U.$35h=1,t.handleDragAndDrop(y,"begin"),j(y)){var G=y.touches[0];y=G?G:y.changedTouches[0]}var L=U.$36h=new Image,A=t.$10h[t.sm().ld().getId()].querySelector(".image-box"),Y=parseInt(A.style.width),d=parseInt(A.style.height);L.draggable=!1,L.src=A.toDataURL(),L.width=Y,L.height=d,L.style.position="absolute",L.style.left=y.pageX-Y/2+K,L.style.top=y.pageY-d/2+K,T().appendChild(L),M.startDragging(U,y)}}},$27h:function(T){var C=this.$22h,h=C.getView(),q=h.getBoundingClientRect(),B=C._29I,N=T.clientX-q.left+h.scrollLeft;return C._41o()&&B.x+B.width-N<v}}),ht.widget.Palette=function(v){var T=this,X=T._view=Z.createView(null,T);T.$9h={},T.$10h={},T.$4h={},T._29I={x:0,y:0,width:0,height:0},T._59I=0,T.dm(v?v:new ht.DataModel),X[s]="ht-widget-palette",T.$29h=new W(T),E(X,I,M.paletteContentBackground),E(X,D,"auto"),E(X,h,m),E(X,"-moz-"+h,m),E(X,"-webkit-"+Q,r),E(X,"-moz-"+Q,r),E(X,"-ms-"+Q,r),E(X,Q,r),E(X,"position","absolute"),E(X,"overflow","hidden"),c(X,T._79O=z()),L(X,"dragstart",function(p){p.dataTransfer&&(p.dataTransfer.setData("Text","nodeid:"+p.target.$11h),p.dataTransfer.effectAllowed="all",T.$29h.$26h())})},B("Palette",e,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:M.autoHideScrollBar,_scrollBarSize:M.scrollBarSize,_scrollBarColor:M.scrollBarColor,getViewRect:function(){return this._29I},ty:function(Y){return Y==b?this.getTranslateY():(this.setTranslateY(Y),void 0)},setTranslateY:function(w){if(this.$32h==b){var R=this,X=R.$33h(w),k=R.$30h;R.$30h=X,R.fp("translateY",k,X)}},getTranslateY:function(){return this.$30h},setLayout:function(k){var U,r,I=this,n=I._layout;I._layout=k,"smallicons"===k?U=r=20:"iconsonly"===k?U=r=50:(U=70,r=50),I.setItemImageWidth(U),I.setItemImageHeight(r),I.setItemImagePadding(4),I.fp("layout",n,k)},getDataAt:function(f){for(var T=f.target;T&&T.$11h==b;)T=T.parentNode;return T&&T.$11h!=b?this.getDataModel().getDataById(T.$11h):void 0},$20h:function(){var u=16;return p&&(u*=1.2),u},$19h:function(){return M.paletteTitleHeight},$18h:function(){var S=M.paletteSeparatorWidth,I=M.paletteTitleBackground,p=M.paletteSeparatorColor||M.brighter(I);return S+K+" solid "+p},$17h:function(Q){E(Q,"cursor","pointer"),E(Q,"display","inline-block"),E(Q,"margin-right",(p?8:4)+K),E(Q,"vertical-align",H)},$1h:function(B){var r=this,W=G(),P=G(),b=N("span");W[s]="palette-header",E(W,O,"relative"),E(W,I,M.paletteTitleBackground),E(W,"color",M.paletteTitleLabelColor),E(W,H,S),E(W,h,m),E(W,"-moz-"+h,m),E(W,"padding","0 5px 0 0"),E(W,"border-top",r.$18h()),E(W,i,"100%"),E(W,"cursor","pointer"),E(W,"white-space","nowrap"),E(W,D,"hidden"),E(W,C,M.paletteTitleLabelFont),E(W,"line-height",r.$19h()+K),W.$11h=B.getId();var _=f(),L=r.$19h(),j=r.$20h();r.$17h(_),Z.setCanvas(_,j,L),c(W,_);var t=B.s("tools");if(t)for(var R=0;R<t.length;R++){var X=f();r.$17h(X),Z.setCanvas(X,j,L),X[s]="palette-header-tool palette-header-tool"+B.getId()+"-"+R,X.style.position="absolute",X.style.right=(j+10)*R+"px",X.toolIndex=R,c(W,X)}return _[s]="palette-toggle-icon-"+B.getId(),P[s]="palette-content",E(P,"max-height",0+K),E(P,C,M.paletteContentLabelFont),E(P,D,"hidden"),P.$11h=B.getId(),r.$9h[B.getId()]=P,b[q]=B.getName(),E(b,C,M.paletteTitleLabelFont),c(W,_),c(W,b),[W,P]},$2h:function(g){var z=this,Y=z._layout,e=x&&g.s("draggable")?N("a"):G(),X=f(),C=G(),b=g.getName()||"",J=g.s("title")||g.getToolTip()||b,t=z._itemMargin;X[s]="image-box";var k=z.getItemImageWidth(),h=z.getItemImageHeight();return Z.setCanvas(X,k,h),c(e,X),C[q]=b,C[s]="label-box","iconsonly"!==Y&&c(e,C),e[s]="palette-item",E(e,"vertical-align",H),E(e,"cursor","pointer"),E(e,"border-radius",5+K),E(e,"border","1px solid transparent"),E(e,"text-align","center"),E(e,"display","inline-block"),E(e,"margin-left",t+K),E(e,"margin-top",t+K),E(e,"color",M.paletteContentLabelColor),"smallicons"===Y?(E(X,"vertical-align","middle"),E(e,"margin-left",2+K),E(e,"margin-top",2+K),E(e,"padding",2+K),E(e,"text-align",o),E(C,"display","inline-block"),E(C,"min-width",z.$21h+z._itemMargin+K)):"largeicons"===Y&&(E(C,"max-width",k+K),E(C,"overflow","hidden")),e.$11h=g.getId(),J&&(e.title=J),g.s("draggable")&&!z.handleDragAndDrop&&(x?(e.href="#",E(e,"text-decoration",r)):e.draggable="true"),e},$16h:function(q,f,W,A){var F=Z.initContext(q);Z.translateAndScale(F,0,0,1),F.clearRect(0,0,W,W);var y=(W-A)/2;M.drawStretchImage(F,M.getImage(f),"fill",0,y,A,A),F.restore()},$15h:function(j){var Y=this,O=j.getId(),S=Y._view.querySelector(".palette-toggle-icon-"+O),E=j.isExpanded()?M.paletteCollapseIcon:M.paletteExpandIcon;if(S&&E){var m=Y.$19h(),g=Y.$20h();Y.$16h(S,E,m,g)}},_drawToolsIcon:function(S){var y=this,B=S.s("tools");if(B)for(var w=0;w<B.length;w++){var Z=y._view.querySelector(".palette-header-tool"+S.getId()+"-"+w),k=B[w].icon,i=y.$19h(),g=y.$20h();y.$16h(Z,k,i,g)}},$14h:function(p){var m=this,I=p.getId(),E=m.$10h[I].querySelector(".image-box"),l=p.getImage(),z=p.s("image.stretch");if(E&&l){var P=Z.initContext(E),y=m.getItemImagePadding();y="smallicons"===m._layout?y/2:y;var F=m.getItemImageWidth()-2*y,Q=m.getItemImageHeight()-2*y;Z.translateAndScale(P,0,0,1),P.clearRect(0,0,F,Q),M.drawStretchImage(P,M.getImage(l),z,y,y,F,Q,p,m,m.getBodyColor(p)),P.restore()}},validateImpl:function(){var G,y,$,j=this,v=j.$9h,Z=j._layout,n=j.$10h,l=j.$4h,i=j._view,p=j.dm();if(j.$13h&&(delete j.$13h,l={},p.each(function(U){l[U.getId()]=U})),"smallicons"===Z)for(var k in l){var D=l[k];if(D instanceof w){var B=D.getName()||"",f=M.getTextSize(M.paletteContentLabelFont,B).width;j.$21h!=b&&j.$21h>f||(j.$21h=f)}}for(var k in l){$=l[k];var z,U;if(p.contains($)){if($ instanceof ht.Group){var x,T=j.$1h($),r=n[$.getId()];r&&(x=r.nextSibling,V(i,x),V(i,r)),y=p.getSiblings($).indexOf($);var d=i.children[2*y]||j._79O;d&&d.parentNode?(i.insertBefore(T[0],d),i.insertBefore(x||T[1],d)):(i.appendChild(T[0]),i.appendChild(x||T[1])),n[$.getId()]=T[0],G=v[$.getId()]=x||T[1],U=$.$12h;var s=$.s("promptText");U||($.$12h=N("div"),$.$12h[q]=s||"",U=$.$12h),0===$.getChildren().size()?G.contains(U)||c(G,U):G.contains(U)&&V(G,U)}else if(z=$.getParent()){var W=j.$2h($),H=n[$.getId()];G=v[z.getId()],H&&V(H.parentNode,H),y=p.getSiblings($).indexOf($);var R=G.children[y];R?G.insertBefore(W,R):c(G,W),n[$.getId()]=W,j.$14h($)}}else{var P=n[$.getId()],h=P.parentNode;if($ instanceof ht.Group){var m=P.nextSibling;V(i,P),V(i,m),delete v[$.getId()]}else V(h,P),0===h.children.length&&(z=p.getDataById(h.$11h),z&&(U=z.$12h,U&&!h.contains(U)&&c(h,U)));delete n[$.getId()]}}j.$4h={};var C=function(){var G=j._59I,F=0;j.$32h!=b&&(clearInterval(j.$32h),F=0,delete j.$32h),j.$32h=setInterval(function(){j.$31h(),G===j._59I?(F++,F>=2&&(clearInterval(j.$32h),delete j.$32h)):(F=0,G=j._59I)},30)};for(var J in v)if(G=v[J],$=p.getDataById(v[J].$11h),j.$15h($),j._drawToolsIcon($),$.isExpanded()){if(G.style.maxHeight===0+K){var L=G.scrollHeight+j._itemMargin+K;g(G).duration(200).set(F,L).set("padding-bottom",j._itemMargin+K).end(function(){return function(){C()}}(L))}else G.style.maxHeight=G.scrollHeight+K;G.style.paddingBottom=j._itemMargin+K}else G.style.maxHeight!==0+K&&g(G).duration(200).set(F,S).set("padding-bottom",S).end(function(){return function(){C()}}(G));j.$28h(),j.$31h()},$31h:function(){for(var w=this,j=w._view,y=0,x=j.children,V=0;V<x.length;V++){var S=x[V];S.className&&S.className.indexOf("palette-")>=0&&(y+=S.offsetHeight)}w._59I=y,w.$30h=w.$33h(w.ty());var D=w.ty();j.scrollTop=-D,w._29I={x:0,y:-D,width:j.clientWidth,height:j.clientHeight},E(w._79O,H,-D+K),w._93I()},$33h:function(q){var o=this,z=o._29I.height-o._59I;return z>q&&(q=z),q>0?0:Math.round(q)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(m){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(m.property)<0&&this.redraw(),"translateY"===m.property&&(this.iv(),this._43o())},findDataByName:function(k){for(var q=this.dm().getDatas(),w=0;w<q.size();w++){var C=q.get(w);if(C.getName()===k)return C}},setDataModel:function(W){var n=this,J=n._dataModel,A=n._selectionModel;J!==W&&(J&&(J.umm(n.$6h,n),J.umd(n.$8h,n),J.umh(n.$7h,n),A||J.sm().ums(n.$28h,n)),n._dataModel=W,W.mm(n.$6h,n),W.md(n.$8h,n),W.mh(n.$7h,n),A?A._21I(W):W.sm().ms(n.$28h,n),n.sm().setSelectionMode("single"),n.fp("dataModel",J,W))},$6h:function(s){var w=this,r=w._view,$=s.data,o=w.$4h;"add"===s.kind?o[$.getId()]=$:"remove"===s.kind?o[$.getId()]=$:"clear"===s.kind&&(w.$10h={},w.$9h={},w.$4h={},r[q]=""),w.iv()},$7h:function(Z){var s=this,f=Z.data;s.$4h[f.getId()]=f,s.iv()},$8h:function(I){var q=this,X=I.data,W=I.property;"expanded"===W?q.iv():(q.$4h[X.getId()]=X,q.iv())},$28h:function(){var H,L=this,u=L.sm(),e="palette-item",X=u.ld();this.dm().each(function(b){H=L.$10h[b.getId()],H&&H[s].indexOf(e)>=0&&(b===X?E(H,I,M.paletteItemSelectBackground):l(H,I))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);