!function(C){"use strict";function x(H){var f,d,S,C,k,I,n,x=[],o=0;f=t.createDiv(),f.style.overflow="hidden";var E=H.getView();E.insertBefore(f,H.getCanvas()),d=w.Default.createDiv(),d.style.WebkitTransformStyle="preserve-3d",d.style.MozTransformStyle="preserve-3d",d.style.transformStyle="preserve-3d",f.appendChild(d),[{event:"mousedown",style:"none"},{event:"mouseup",style:"auto"},{event:"touchstart",style:"none"},{event:"touchend",style:"auto"}].forEach(function(H){var n=H.style;q.addEventListener(E,H.event,function(){f.style.pointerEvents=n})}),this.updateWebView=function(){if(H.getWidth()&&H.getHeight()){var P=H.getCanvas(),u=1*P.style.width.slice(0,-2),Q=1*P.style.height.slice(0,-2);(x[0]!==u||x[1]!==Q)&&(x[0]=u,x[1]=Q,f.style.width=u+"px",f.style.height=Q+"px",d.style.width=u+"px",d.style.height=Q+"px");var F=H._projectMatrix[5]*x[1]/2;F!==S&&(S=F,f.style.WebkitPerspective=S+"px",f.style.MozPerspective=S+"px",f.style.perspective=S+"px"),I="translateZ("+S+"px)"+j(H._viewMatrix);var R=I+"translate("+x[0]/2+"px,"+x[1]/2+"px)";C===R||k||(d.style.WebkitTransform=R,d.style.MozTransform=R,d.style.transform=R,C=R),o++,n=!1,H.dm().each(function(J){J.isWebView&&b(J)});for(var U,M=d.children,_=[],h=0,e=M.length;e>h;h++)U=M[h],U._isHtWebView&&U._renderCookie!==o&&_.push(U);_.length&&_.forEach(function(e){d.removeChild(e)})}};var J=new Array(16),b=function(c){var q=c.getAttach();if(q){q.parentElement!==d&&d.appendChild(q),q._renderCookie=o,n=!0;var A=c.getFinalScale3d(),N=c._prefrenceSize;N&&N[0]?N[1]||(N[1]=N[0]/A[0]*A[1]):N=[A[0],A[1]],q.style.width=N[0]+"px",q.style.height=N[1]+"px";var M=1/N[0],X=1/N[1],Z=1,w=c.mat;J[0]=w[0]*M,J[1]=w[1]*M,J[2]=w[2]*M,J[3]=w[3]*M,J[4]=w[4]*X,J[5]=w[5]*X,J[6]=w[6]*X,J[7]=w[7]*X,J[8]=w[8]*Z,J[9]=w[9]*Z,J[10]=w[10]*Z,J[11]=w[11]*Z,J[12]=w[12],J[13]=w[13],J[14]=w[14],J[15]=w[15];var R=h(J,k?"translate("+x[0]/2+"px,"+x[1]/2+"px)"+I:""),t=q.$a2;t!==R&&(q.$a2=R,q.style.WebkitTransform=R,q.style.MozTransform=R,q.style.transform=R)}}}function c(W){return Math.abs(W)<1e-10?0:W}function j($){var m=$;return"matrix3d("+c(m[0])+","+c(-m[1])+","+c(m[2])+","+c(m[3])+","+c(m[4])+","+c(-m[5])+","+c(m[6])+","+c(m[7])+","+c(m[8])+","+c(-m[9])+","+c(m[10])+","+c(m[11])+","+c(m[12])+","+c(-m[13])+","+c(m[14])+","+c(m[15])+")"}function h(q,U){var T=q,D="matrix3d("+c(T[0])+","+c(T[1])+","+c(T[2])+","+c(T[3])+","+c(-T[4])+","+c(-T[5])+","+c(-T[6])+","+c(-T[7])+","+c(T[8])+","+c(T[9])+","+c(T[10])+","+c(T[11])+","+c(T[12])+","+c(T[13])+","+c(T[14])+","+c(T[15])+")";return"translate(-50%,-50%)"+(U||"")+D}var n="ht",w=C[n],t=w.Default,q=t.getInternal(),B=q.superCall,P=w.graph3d.Graph3dView,J=P.prototype.validateImpl;P.prototype.validateImpl=function(){J.call(this);var R=this._webViewRenderer;R||(R=this._webViewRenderer=new x(this)),R.updateWebView()};var T=w.WebView3d=function(){var k=this;B(T,k),k.s({shape3d:"billboard","shape3d.reverse.flip":!0})},V=[1,1,1,1],W=[0,0,0,0];t.def(n+"."+"WebView3d",w.Node,{ms_ac:["attach"],isWebView:!0,attachDOM:function(Z,V,g){if(!Z)return this.detachDOM();if("string"==typeof Z){var L=document.createElement("iframe");L.src=Z,Z=L}var I=Z.style;I.position="absolute",I.border=0,I.outline=0,I.padding=0,I.margin=0,Z._isHtWebView=!0,this.setAttach(Z),this._prefrenceSize=[V,g],this.s("shape3d.blend",W)},detachDOM:function(){this.setAttach(null),this.s("shape3d.blend",this.getBgColor())},setBgColor:function(M){this.a("defaultBgColor",M),this.getAttach()||this.s("shape3d.blend",M)},getBgColor:function(){return this.a("defaultBgColor")||V}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);